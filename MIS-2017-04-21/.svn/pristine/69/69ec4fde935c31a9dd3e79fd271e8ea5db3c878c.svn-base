<%@ page contentType="text/html;charset=UTF-8" language="java"%> 
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> 
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" href="images/logo.png">

	<title>健康评估列表</title>

	<!-- Bootstrap core CSS -->
	<link href="js/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="js/jquery.gritter/css/jquery.gritter.css" />

	<link rel="stylesheet" href="fonts/font-awesome-4/css/font-awesome.min.css">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	  <script src="../../assets/js/html5shiv.js"></script>
	  <script src="../../assets/js/respond.min.js"></script>
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="js/jquery.nanoscroller/nanoscroller.css" />
	<link rel="stylesheet" type="text/css" href="js/jquery.easypiechart/jquery.easy-pie-chart.css" />
	<link rel="stylesheet" type="text/css" href="js/bootstrap.switch/bootstrap-switch.css" />
	<link rel="stylesheet" type="text/css" href="js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
	<link rel="stylesheet" type="text/css" href="js/jquery.select2/select2.css" />
	<link rel="stylesheet" type="text/css" href="js/bootstrap.slider/css/slider.css" />
    <link rel="stylesheet" type="text/css" href="js/jquery.niftymodals/css/component.css" />
    <link href="js/jquery.icheck/skins/square/blue.css" rel="stylesheet">

    <link rel="stylesheet" href="js/jquery.crop/css/jquery.Jcrop.css" type="text/css" />
	<link href="css/style.css" rel="stylesheet" />	
	<link rel="stylesheet" type="text/css" href="js/jquery.datatables/bootstrap-adapter/css/datatables.css" />
    <script type="text/javascript" src="js/sortListTool.js"></script>
<style>
.accordion .panel,.accordion .panel:first-child{border-top:1px solid #ECECEC;border-bottom:1px solid #ECECEC;}
.checkbox-inline{padding-left:0;padding-right:30px;}
 .checkbox-inline + .checkbox-inline{margin-left:0;}
  .whitebg td{background:#fff;}
.whitebg td textarea{width:100%;height:100%;border:0;resize:vertical}
.whitebg .fa-minus{color:#df4b33;cursor:pointer}
.mytable .fa-plus{color:#4cae4c;cursor:pointer}
</style>

<script type="text/javascript" src="js/addressJS.js"></script>
</head>

<body>	
<div id="cl-wrapper" style="padding-top:0px">	
		<div class="container-fluid" style="padding: 0px">
		<!-- 头部开始 -->
			<div class="page-head">
				<h2>健康评估列表</h2>
				<ol class="breadcrumb">
					<li>健康管理</li>
					<input type="hidden" value="" id="sortType">
					<input type="hidden" value="" id="sortColumn">
					<li class="active">健康评估列表</li>
				</ol>
			</div>
		</div>
		<!-- 头部结束 -->
	<div class="cl-mcont">
    <div class="block-flat">
						<div class="row">
									
										<div class="col-sm-2" style=" vertical-align: middle; height: 34px; line-height: 34px;">
											<label>评估时间</label>
										</div>
										<div class="col-sm-5 col-md-2" style="margin-bottom:10px;">
											<div class="input-group date datetime" data-min-view="2" data-date-format="yyyy-mm-dd" style="margin-bottom: 0px;">
												<span class="input-group-addon btn btn-primary"><span class="glyphicon glyphicon-th"></span></span>
												<input class="form-control" size="16" value="" readonly="" type="text" id="pgsj_input_start" placeholder="开始时间">
												<span class="input-group-btn"><button class="btn btn-danger deleteThisTime" type="button"><span class="fa fa-times"></span></button></span>
											</div>
										</div>
										<div class="col-sm-5 col-md-2" style="margin-bottom:10px;">
											<div class="input-group date datetime" data-min-view="2" data-date-format="yyyy-mm-dd" style="margin-bottom: 0px;">
												<span class="input-group-addon btn btn-primary"><span class="glyphicon glyphicon-th"></span></span>
												<input class="form-control" size="16" value="" readonly="" type="text" id="pgsj_input_end" placeholder="结束时间">
												<span class="input-group-btn"><button class="btn btn-danger deleteThisTime" type="button"><span class="fa fa-times"></span></button></span>
											</div>
										</div>
										
										<div class="col-sm-2 col-md-2" style=" vertical-align: middle; height: 34px; line-height: 34px;">
											<label>评估类型</label>
										</div>
										<div class="col-sm-4 col-md-4" style="margin-bottom:10px;">
											<select class="form-control" id="pglx_input" ><option value="">全部</option><option value="1">康复评估</option><option value="2">护理评估</option><option value="3">混合健康评估</option></select>
								  
										</div>
										
										
										<div class="col-sm-2  col-md-2" style="vertical-align: middle; height: 34px; line-height: 34px;">
											<label>评估状态</label>
										</div>
										<div class="col-sm-4 col-md-4" style="margin-bottom:10px;">
											<select class="form-control" id="pgzt_input" ><option value="">全部</option><option value="1">未完成</option><option value="2">已完成</option></select>
								  
										</div>
										<div class="col-sm-2  col-md-2" style=" vertical-align: middle; height: 34px; line-height: 34px;">
											<label>评估人</label>
										</div>
										<div class="col-sm-4 col-md-4" style="margin-bottom:10px;">
											<input class="form-control" type="text"  id="pgr_input" >
										</div>
										<div class="col-sm-2  col-md-2" style="vertical-align: middle; height: 34px; line-height: 34px;">
											<label>会员号</label>
										</div>
										<div class="col-sm-4 col-md-4" style="margin-bottom:10px;">
											<input class="form-control" type="text"  id="huiyuanhao_input" >
										</div>

									<!-- 查询框结束 -->
									<!-- 操作按钮开始 -->
									
										<div class="col-sm-12" style="margin-top:20px">		
											<c:if test="${health_query_btn_control != 'yes' or health_query_btn_show == 'yes'}">
												<button class="btn btn-primary" style="margin-bottom: 0px !important; height: 34px;margin-left:0;" onclick="query()">查询</button>
											</c:if>	
											<div class="btn-group" style="margin-top:5px;float:right">
												 <c:if test="${health_add_btn_control != 'yes' or health_add_btn_show == 'yes'}">
						  						 <button type="button" class="btn btn-primary dropdown-toggle md-trigger" data-toggle="dropdown" data-modal="kh_hl_md" onclick="xinzengkfpd()">
													<span><i class="fa fa-plus" style="margin-right:5px;"></i>新增</span>
						 						 </button>
						 						 <a href="<%=request.getContextPath()%>/rehabilitationEvaluation.do?main" target="_blank" style="display:none;" id="kfpd_a">康复评定</a>
												 <a href="<%=request.getContextPath()%>/nursingEvaluation.do?main" target="_blank" style="display:none;" id="flpd_a">护理评定</a>
												 <a href="<%=request.getContextPath()%>/mixedhealthassessment.do?main" target="_blank" style="display:none;" id="hhjkpg_a">混合健康评估</a>
						 						 </c:if>
										 	</div>
										</div>
								
									<!-- 操作按钮结束 -->
                                    <!-- 数据表格开始 -->
								
										<div class="col-sm-12">							
											<table class="table table-bordered dataTable hover" id="datatable" aria-describedby="datatable_info">
												<thead>
													<tr role="row">
														<th><strong>会员姓名</strong></th>
														<th><strong>会员号码</strong></th>
														<th name="needSort" class="sorting" onclick="queryBySort(this,'employeeId')"><strong>评估人</strong></th>
														<th name="needSort" class="sorting" onclick="queryBySort(this,'status')"><strong>评估状态</strong></th>
														<th name="needSort" class="sorting" onclick="queryBySort(this,'type')"><strong>评估类别</strong></th>
														<th name="needSort" class="sorting" onclick="queryBySort(this,'assessmentTime')"><strong>评估时间</strong></th>
														<th><strong>操作</strong></th>
													</tr>
												</thead>
												<tbody id="datacontainer" role="alert" aria-live="polite" aria-relevant="all">																														
												</tbody>
											</table>
										</div>
									</div>
									 <!-- 数据条数提示开始 -->
									<div class="row">
										<div class="col-sm-12">
											<div class="pull-left">
												<div id="datatable_info" class="dataTables_info">
													当前显示0 条总记录中的第0-0条
												</div>
											</div>
											<div class="clearfix"></div>
										</div>
									</div>
									<!-- 数据条数提示结束 -->
								    <!-- 分页条开始 -->
									<div class="row">
										<div class="col-sm-4">
											<div class="dataTables_length" id="datatable2_length">
												<label style="margin-top:18px;">每页 <select id="pageSizeSelector"  aria-controls="datatable2" size="1" name="datatable2_length" onchange="query()"><option selected="selected" value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> 条</label>
											</div>
										</div>
										<div class="col-sm-8">
											<div class="pull-right">
												<div class="dataTables_paginate paging_bs_normal">
													<ul id="paginationArea" class="pagination">
													<li class="prev disabled"><a href="#"><span class="fa fa-angle-left"></span>&nbsp;上一页</a></li>
													<li class="active"><a href="#">1</a></li>
													<li class="next"><a href="#">下一页&nbsp;<span class="fa fa-angle-right"></span></a></li></ul>
												</div>
											</div>
										</div>
									</div>
									<!-- 分页条结束 -->
								</div>
								</div>

							</div> 
	
					</div> <!-- 主页面结束 -->

    <!-- 模态框开始-->
               
  				<!-- 康复评估，护理评估选择页-->
                <div class="md-modal colored-header custom-width md-effect-9" id="kh_hl_md">
                    <div class="md-content">
                      <div class="modal-header">
                        <h3>选择类别</h3>
                        <button type="button" class="close md-close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      </div>
                      <div class="modal-body form form-horizontal">
                     <!--  <form class="" > -->
                        <div class="form-group">
                        <label class="col-sm-4 control-label">评估类型</label>
						<div class="col-sm-6 " >
							<select class="form-control" id="pglx_input_choose" >
								<option value="1">康复评估</option>
								<option value="2">护理评估</option>
								<option value="3">混合健康评估</option>
							</select>
						</div></div>
						<div class="form-group">
                        <label class="col-sm-4 control-label">输入类型</label>
						<div class="col-sm-6 " >
							<select class="form-control" id="hljh_input_choose" onchange="hljh_input_choose()">
								<option value="1">会员号</option>
								<option value="2">会员卡号</option>
							</select>
						</div></div>
                        <div class="form-group" id="hyIfxianshi">
						    <label class="col-sm-4 control-label">会员号</label>
							<div class="col-sm-6 " >
								<input class="form-control" type="text"  id="huiyuanhao_input_choose" value="">
							</div>
                        </div>
                        <div class="form-group" id="hkyIfxianshi">
						    <label class="col-sm-4 control-label">会员卡号</label>
							<div class="col-sm-6 " >
								<input class="form-control" type="text"  id="huiyuankahao_input_choose" value="">
							</div>
						</div>
                        <!-- </form> -->	
					  </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-primary btn-flat" data-dismiss="modal" id="tcSure" onclick="sureChoose()">确定</button>
                        <button type="button" class="btn btn-default btn-flat md-close" data-dismiss="modal" id="quxiao_tanchuang" onclick="quxiaoChoose()">取消</button>
                      </div>
                    </div>
                </div>
                
				 <div class="md-overlay"></div>


	<script src="js/jquery.js"></script>
	<script type="text/javascript" src="js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
	<script type="text/javascript" src="js/jquery.sparkline/jquery.sparkline.min.js"></script>
	<script type="text/javascript" src="js/jquery.easypiechart/jquery.easy-pie-chart.js"></script>
  <script src="js/jquery.ui/jquery-ui.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/jquery.nestable/jquery.nestable.js"></script>
	<script type="text/javascript" src="js/bootstrap.switch/bootstrap-switch.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<script src="js/jquery.select2/select2.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.slider/js/bootstrap-slider.js" type="text/javascript"></script>
	<script type="text/javascript" src="js/jquery.gritter/js/jquery.gritter.js"></script>
  <script type="text/javascript" src="js/jquery.niftymodals/js/jquery.modalEffects.js"></script>   
  <script type="text/javascript" src="js/masonry.js"></script>
  <script type="text/javascript" src="js/jquery.crop/js/jquery.Jcrop.js"></script>

  <!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
  <script src="js/jquery.upload/js/jquery.iframe-transport.js"></script>
  <!-- The basic File Upload plugin -->
  <script src="js/jquery.upload/js/jquery.fileupload.js"></script>
	<script type="text/javascript" src="js/behaviour/general.js"></script>
	<script type="text/javascript" src="js/jquery.icheck/icheck.min.js"></script>


    <script type="text/javascript">
    //根据排序规则重新查询
	function queryBySort(par,column){
		var classFlag = listSortClickEvent(par);
		var type = judgmentChinese(column);
		if(type != null && type != ""){
			classFlag = type + classFlag;
			column = column.substr(8,column.length);
		}
		$("#sortType").val(classFlag);
		$("#sortColumn").val(column);
		go2page(currentshownpage);
	}

    //弹出新增健康评估弹窗
    function xinzengkfpd(){
    	$("#huiyuanhao_input_choose").val("");
     	$("#huiyuankahao_input_choose").val("");
     	$("#pglx_input_choose").val("1");
     	$("#hljh_input_choose").val("1");
     	$("#hyIfxianshi").show();
     	$("#hkyIfxianshi").hide();
    }
    
    //根据所选的输入类型，修改第三项输入框内容
	 function hljh_input_choose(){
     	$("#huiyuanhao_input_choose").val("");
     	$("#huiyuankahao_input_choose").val("");
     	var choose = $("#hljh_input_choose").val();
     	if(choose == "1"){
     		$("#hyIfxianshi").show();
     		$("#hkyIfxianshi").hide();
     	}
     	if(choose == "2"){
     		$("#hyIfxianshi").hide();
     		$("#hkyIfxianshi").show();
     	}
     }
     
    //新增健康评估弹窗确认
    function sureChoose(){
    	if($.trim($("#huiyuanhao_input_choose").val()) == "" && $.trim($("#huiyuankahao_input_choose").val()) == ""){
    		alert("请输入信息");
    		return;
    	}
    	var id = "";
    	if($.trim($("#huiyuanhao_input_choose").val()) != ""){
    		id = checkHYH($.trim($("#huiyuanhao_input_choose").val()));
    		if(id == ""){
    	    	alert("会员号不存在");
    			return;
    		}
    	}
    	if($.trim($("#huiyuankahao_input_choose").val()) != ""){
    		id = checkHYKH($.trim($("#huiyuankahao_input_choose").val()));
    		if(id == ""){
    	    	alert("会员卡号不存在");
    			return;
    		}
    	}
    	
    	var userId_login = "<%=request.getAttribute("userId")%>";
		if (userId_login == null) {
			userId_login = "";
		}

    	if($("#pglx_input_choose").val() == 1){
    		var url = "<%=request.getContextPath()%>" + "/rehabilitationEvaluation.do?main&oldid=" + id;
    		$("#kfpd_a").attr("href",url);
    		document.getElementById("kfpd_a").click(); 
    	}
    	if($("#pglx_input_choose").val() == 2){
    	    var url = "<%=request.getContextPath()%>" + "/nursingEvaluation.do?main&oldid=" + id;
    		$("#flpd_a").attr("href",url);
    		document.getElementById("flpd_a").click(); 
    	}
    	if($("#pglx_input_choose").val() == 3){
    	    var url = "<%=request.getContextPath()%>" + "/mixedhealthassessment.do?main&oldid=" + id;
    		$("#hhjkpg_a").attr("href",url);
    		document.getElementById("hhjkpg_a").click(); 
    	}
    	$("#quxiao_tanchuang").click();
    }
	//新增健康评估弹窗
    function quxiaoChoose(){
    	$("#huiyuanhao_input_choose").val("");
    }
    
    //检查会员号是否存在
    function checkHYH(idnumber){
    	var id = "";
    	jQuery.ajax({
          type : "post",
          async:false,
          url : "healthAssessment.do?checkHYH",
          dataType : "json",
          data: {
               "idnumber":idnumber
          },
          success : function(data){
              if(data.des=="success"){
            	 id = data.id;
              }else if(data.des=="failure"){
                 //alert("查询失败");
              }
          },
          error:function(){
	           alert("error");
          }
     	});
     	return id;
    }
    //检查会员卡号是否存在
    function checkHYKH(idnumber_Card){
    	var id = "";
    	jQuery.ajax({
          type : "post",
          async:false,
          url : "healthAssessment.do?checkHYKH",
          dataType : "json",
          data: {
               "idnumber_Card":idnumber_Card
          },
          success : function(data){
              if(data.des=="success"){
            	 id = data.id;
              }else if(data.des=="failure"){
                 //alert("查询失败");
              }
          },
          error:function(){
	           alert("error");
          }
     	});
     	return id;
    }
    
    $(document).ready(function(){
    	$(".deleteThisTime").click(function(){               //清除日期框中的值
    	       $(this).parent().prev()[0].value = "";
    	    });
        App.init();
        query();
        
        
        $("#pglx_input_choose").keydown(function() { //焦点在弹窗第一个时，按回车，焦点跳转到第二个
			if (event.keyCode == 13) {
				$("#hljh_input_choose").focus();
				return;
			}
		});
		
		$("#huiyuanhao_input_choose").keydown(function() { //焦点在弹窗第二个时，按回车，点击确定
			if (event.keyCode == 13) {
				$("#tcSure").click();
				return;
			}
		});
		
		$("#huiyuankahao_input_choose").keydown(function() { //焦点在弹窗第二个时，按回车，点击确定
			if (event.keyCode == 13) {
				$("#tcSure").click();
				return;
			}
		});
		
		$("#hyIfxianshi").show();
     	$("#hkyIfxianshi").hide();
     });
    
    //查询健康评估列表信息
	var currentshownpage = 1;
	function query() {
		go2page(1);
	}

	function go2page(pagenumber){
	var pagesize = $("#pageSizeSelector option:selected").val();
	
	var pgsj_input_start = $("#pgsj_input_start").val();
	var pgsj_input_end = $("#pgsj_input_end").val();
	var pglx_input = $("#pglx_input").val();
	var pgzt_input = $("#pgzt_input").val();
	var pgr_input = $("#pgr_input").val();
	var huiyuanhao_input = $("#huiyuanhao_input").val();

	var reqmsg = "{'action':'QUERY_HEALTH_ASSESSMENT_LIST_REQUEST',";
	
	var sortType = $("#sortType").val();
	var sortColumn = $("#sortColumn").val();
	if(sortType != null && sortType != ""){
		reqmsg += "'order':[{'column':'" + sortColumn + "','type':'" + sortType + "'}],";
	}
	
	reqmsg += "'page':{'pageno':'" + pagenumber + "','pagesize':'" + pagesize + "'},'content':{\"olderShow\":\"true\",\"employeeShow\":\"true\",";
	
	if (pgsj_input_start != null && pgsj_input_start != "") {
	    pgsj_input_start = pgsj_input_start.substring(0, 4) + pgsj_input_start.substring(5, 7) + pgsj_input_start.substring(8, 10) + "000000";
		reqmsg += "\"assessmentTime_ge\":\"" + pgsj_input_start + "\",";
	}
	if (pgsj_input_end != null && pgsj_input_end != "") {
		pgsj_input_end = pgsj_input_end.substring(0, 4) + pgsj_input_end.substring(5, 7) + pgsj_input_end.substring(8, 10) + "240000";
		reqmsg += "\"assessmentTime_le\":\"" + pgsj_input_end + "\",";
	}
	if(pgsj_input_start > pgsj_input_end){
		alert("评估开始时间不能大于结束时间");
		return;
	}
	if (pglx_input != null && pglx_input != "") {
		reqmsg += "\"type\":" + pglx_input + ",";
	}
	if (pgzt_input != null && pgzt_input != "") {
		reqmsg += "\"status\":" + pgzt_input + ",";
	}
	if (pgr_input != null && pgr_input != "") {
		reqmsg += "\"employeeName\":\"" + pgr_input + "\",";
	}
	if (huiyuanhao_input != null && huiyuanhao_input != "") {
		reqmsg += "\"olderCount\":\"" + huiyuanhao_input + "\",";
	}
	reqmsg += "}}";

    jQuery.ajax({
          type : "post",
          async:true,
          url : "healthAssessment.do?handler",
          dataType : "json",
          data: {
               "reqmsg":reqmsg
          },
          success : function(data){
              if(data.des=="success"){
            	  changeData(data);
              }else if(data.des=="failure"){
                 alert("查询失败");
              }
          },
          error:function(){
	           alert("error");
          }
     });
	}

function changeData(data){
	var htmlcode = "";
	if (data.content != null) {
		var oldid = "0";
		jQuery.each(data.content.healthAssessmentList, function(i, item) {
			htmlcode += "<tr>";		
			if(item.older != null && item.older != ""){
				htmlcode += "<td>" + item.older.name + "</td>";	
		    	htmlcode += "<td>" + item.older.memberNum + "</td>";
			}else{
				htmlcode += "<td>无</td>";	
				htmlcode += "<td>无</td>";	
			}
		    if(item.employeeName != null && item.employeeName !=""){
				htmlcode += "<td>" + item.employeeName + "</td>";
		    }else{
		    	htmlcode += "<td></td>";
		    }
		    htmlcode += "<td>" + changeStatus(item.status) + "</td>";		
		    htmlcode += "<td>" + changeType(item.type) + "</td>";		
		    htmlcode += "<td>" + formateTime(item.assessmentTime) + "</td>";
			
			htmlcode += "<td><div class=\"btn-group\">";
			htmlcode += "<button class=\"btn btn-default btn-xs\" type=\"button\">操作</button>";
			htmlcode += "<button data-toggle=\"dropdown\" class=\"btn btn-xs btn-primary dropdown-toggle\" type=\"button\">";
			htmlcode += "<span class=\"caret\" style=\"padding:0;\"></span>";
			htmlcode += "<span class=\"sr-only\">Toggle Dropdown</span>";
			htmlcode += "</button>";
			htmlcode += "<ul role=\"menu\" class=\"dropdown-menu pull-right\">";
			var headUrl = "<%=request.getContextPath()%>";
			var userId_login = "<%=request.getAttribute("userId")%>";
			if (userId_login == null) {
				userId_login = "";
			}
			<c:if test="${health_queryXQ_opt_control != 'yes' or health_queryXQ_opt_show == 'yes'}">
			if(item.older != null && item.older != ""){
				oldid = item.older.id;
			}else{
				oldid = "0";
			}
			if(item.type == 1){
				htmlcode += "<li><a href=\""+headUrl+"/rehabilitationEvaluation.do?main&oldid=" + oldid + "&id=" + item.id + "\" target=\"_blank\">查看详情</a></li>";
			}else if(item.type == 2){
				htmlcode += "<li><a href=\""+headUrl+"/nursingEvaluation.do?main&oldid=" + oldid + "&id=" + item.id + "\" target=\"_blank\">查看详情</a></li>";
			}else if(item.type == 3){
				htmlcode += "<li><a href=\""+headUrl+"/mixedhealthassessment.do?main&oldid=" + oldid + "&id=" + item.id + "\" target=\"_blank\">查看详情</a></li>";
			}
			oldid = "0";
			</c:if>
			htmlcode += "</ul>";
			htmlcode += "</div></td>";		
			htmlcode += "</tr>";
		});
	}
	$("#datacontainer").html(htmlcode);
	if (data.page != null) {
		genaratePaginateHtml(data.page.pageno, data.page.pageCount);
		genarateRecordNumberHtml(data.page.pageno, data.page.pagesize, data.page.recordCount);
	} else {
		genaratePaginateHtml(1, 1);
		genarateRecordNumberHtml(1, 10, 0);
	}
}
/**
 * 生成记录数信息
 * @method genarateRecordNumberHtml
 * @param {Number} currentpage 当前页
 * @param {Number} pagesize 每页记录条目数
 * @param {Number} totalRecord 总记录数
 */
function genarateRecordNumberHtml(currentpage, pagesize, totalRecord) {
	var recordInfos = "";
	if (totalRecord > 0) {
	    recordInfos = "当前显示" + totalRecord + "条总记录";
		recordInfos += "中第" + ((currentpage - 1) * pagesize + 1) + "-";
		if (currentpage * pagesize > totalRecord) {
			recordInfos += totalRecord;
		} else {
			recordInfos += currentpage * pagesize;
		}
		recordInfos += "条 ";
	} else {
		recordInfos = "当前显示0 条总记录中的第0-0条";
	}
	
	$("#datatable_info").html(recordInfos);
}

/**
 * 生成分页信息
 * @method genaratePaginateHtml
 * @param {Number} currentpage 当前页
 * @param {Number} totalpage 总页数
 */
function genaratePaginateHtml(currentpage, totalpage, pagesize) {
	currentshownpage = currentpage;

	var htmlcode = "";
	
	//上一页
	if (currentpage > 1) {
		htmlcode += "<li class=\"pre\"><a href=\"#\" onclick=\"go2page('1')\"><span class=\"fa fa-angle-left\"></span>&nbsp;首页</a></li>";
		htmlcode += "<li class=\"pre\"><a href=\"#\" onclick=\"go2page('" + (currentpage - 1) + "')\"><span class=\"fa fa-angle-left\"></span>&nbsp;上一页</a></li>";
	} else {
		htmlcode += "<li class=\"pre disabled\"><a href=\"#\"><span class=\"fa fa-angle-left\"></span>&nbsp;首页</a></li>";
		htmlcode += "<li class=\"pre disabled\"><a href=\"#\"><span class=\"fa fa-angle-left\"></span>&nbsp;上一页</a></li>";
	}
	
	//具体页码
	if (totalpage <= 5) {
		for (var i = 1; i <= totalpage; i++) {
			if (currentpage == i) {
				htmlcode += "<li class=\"active\"><a href=\"#\">" + i + "</a></li>";
			} else {
				htmlcode += "<li><a href=\"#\" onclick=\"go2page('" + i + "')\">" + i + "</a></li>";
			}
		}
	} else {
		var startpage = currentpage;
		var endpage = currentpage;
		while (true) {
			if (endpage - startpage >= 4) {
				break;
			} else {
				if (startpage > 1) {
					startpage = startpage - 1;
				}
				if (endpage < totalpage) {
					endpage = endpage - (-1);
				}
			}
		}
		
		for (var i = startpage; i <= endpage; i++) {
			if (currentpage == i) {
				htmlcode += "<li class=\"active\"><a href=\"#\">" + i + "</a></li>";
			} else {
				htmlcode += "<li><a href=\"#\" onclick=\"go2page('" + i + "')\">" + i + "</a></li>";
			}
		}
	}
	
	//下一页
	if (totalpage > currentpage) {
		htmlcode += "<li class=\"next\"><a href=\"#\" onclick=\"go2page('" + (parseInt(currentpage) + 1) + "')\">下一页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
		htmlcode += "<li class=\"next\"><a href=\"#\" onclick=\"go2page('" + parseInt(totalpage) + "')\">末页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
	} else {
		htmlcode += "<li class=\"next disabled\"><a href=\"#\">下一页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
		htmlcode += "<li class=\"next disabled\"><a href=\"#\">末页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
	}
	$("#paginationArea").html(htmlcode);
}


/**
 * 格式化时间
 * @method formateTime
 * @param {String} time 时间信息(YYYYMMDDHHmmSS)
 * @return 格式化的时间(YYYY-MM-DD HH:mm:SS)
 */
function formateTime(time) {
	if (time != null && time.length == 14) {
		return time.substring(0, 4) + "-" + time.substring(4, 6) + "-" + time.substring(6, 8) + " " + time.substring(8, 10) + ":" + time.substring(10, 12) + ":" + time.substring(12, 14);
	} else {
		return time;
	}
}

//评估类别转化
function changeType(type){
	var typeName = "";
	switch(type){
		case 1:
			typeName = "康复评估";
			break;
		case 2:
			typeName = "护理评估";
			break;
		case 3:
			typeName = "混合健康评估";
			break;
		default:
			typeName = "未知";
			break;
	}
	return typeName;
}
//评估状态转化
function changeStatus(status){
	var statusName = "";
	switch(status){
		case 1:
			statusName = "未完成";
			break;
		case 2:
			statusName = "已完成";
			break;
		default:
			statusName = "未知";
			break;
	}
	return statusName;
}
    </script>
    



  <script src="js/behaviour/voice-commands.js"></script>
  <script src="js/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.flot/jquery.flot.js"></script>
<script type="text/javascript" src="js/jquery.flot/jquery.flot.pie.js"></script>
<script type="text/javascript" src="js/jquery.flot/jquery.flot.resize.js"></script>
<script type="text/javascript" src="js/jquery.flot/jquery.flot.labels.js"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>
</body>
</html>
