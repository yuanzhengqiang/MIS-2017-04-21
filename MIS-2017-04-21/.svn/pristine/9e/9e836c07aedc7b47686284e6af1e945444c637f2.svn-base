<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ page import="fsk.init.SystemInit"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%
	String nickname = (String) session.getAttribute("nickname");
	if (nickname == null) {
		nickname = "";
	}
	String photourlMR = SystemInit.photourl;
	String header = SystemInit.header;
	String headerImage = SystemInit.headerImage;
%>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link rel="shortcut icon" href="images/logo.png">

<title>新增老人</title>

<!-- Bootstrap core CSS -->
<link href="js/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
<link rel="stylesheet" type="text/css"
	href="js/jquery.gritter/css/jquery.gritter.css" />

<link rel="stylesheet"
	href="fonts/font-awesome-4/css/font-awesome.min.css">

<link rel="stylesheet" type="text/css"
	href="js/jquery.nanoscroller/nanoscroller.css" />
<link rel="stylesheet" type="text/css"
	href="js/jquery.easypiechart/jquery.easy-pie-chart.css" />
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.switch/bootstrap-switch.css" />
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
<link rel="stylesheet" type="text/css"
	href="js/jquery.select2/select2.css" />
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.slider/css/slider.css" />
<link rel="stylesheet" type="text/css"
	href="js/jquery.niftymodals/css/component.css" />
<link href="js/jquery.icheck/skins/square/blue.css" rel="stylesheet">
<link rel="stylesheet" href="js/jquery.crop/css/jquery.Jcrop.css"
	type="text/css" />
<link href="css/style.css" rel="stylesheet" />
<style>
.accordion .panel,.accordion .panel:first-child {
	border-top: 1px solid #ECECEC;
	border-bottom: 1px solid #ECECEC;
}
.checkbox-inline {
	padding-left: 0;
	padding-right: 30px;
}
.checkbox-inline+.checkbox-inline {
	margin-left: 0;
}
.fa-plus-mine {
	background: red
}
.hide {
	display: none
}
</style>
<script type="text/javascript" src="js/addressJS.js"></script>
</head>

<body>
	<!-- 上侧栏开始 -->
	<div id="head-nav" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span class="fa fa-gear"></span>
				</button>
				<a class="navbar-brand" href="#"
					style="width:auto;background: url(images/<%=headerImage%>) no-repeat 0 10px;"><span><%=header%>/新增老人</span>
				</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right user-nav">
					<li class="dropdown profile_menu"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"> <img
							src="images/avatar2.jpg" /> <span id="accountNickname"><%=nickname%></span>
							<!--                 <b class="caret"></b> --> </a> <!--               <ul class="dropdown-menu"> -->
						<!--                 <li><a href="#" class="md-trigger" data-modal="md-scale3">密码修改</a></li> -->
						<!--                 <li class="divider"></li> --> <!--                 <li><a href="systemLogin.do?logout">退出登录</a></li> -->
						<!--               </ul> --></li>
				</ul>
			</div>
			<!--/.nav-collapse animate-collapse -->
		</div>
	</div>
	<!-- 上侧栏结束 -->


	<div id="cl-wrapper" style="padding-top:0">
		<div class="container-fluid" id="pcont">
			<div class="cl-mcont">


				<div class="row">
					<div class="col-sm-12">
						<div class="tab-container">

							<div class="tab-content">
								<div id="olderBasicInfo" class="tab-pane  cont active">
									<!-- 基本信息开始 -->

									<div class="panel-group accordion accordion-semi"
										id="accordion1-1" style="margin-top:20px;">
										<div class="panel panel-default">
											<div class="panel-heading">
												<h4 class="panel-title">
													<a data-toggle="collapse" data-parent="#accordion1-1"
														href="#ac1-1"> <i class="fa fa-angle-right"></i>基本信息 </a>
												</h4>
											</div>
											<div id="ac1-1" class="panel-collapse collapse in">
												<div class="panel-body form-horizontal">
													<div class="form-group">
														<form style="display:none;" id="image_submit"
															action="position.do?pic2" method="post"
															enctype="multipart/form-data">
															<input type="hidden" name="srcPath" id="srcPath" value="" />
															<input type="hidden" name="type" id="type"
																value="olderPhoto_" /> <input type="hidden" name="x1"
																id="x1" value="0" /> <input type="hidden" name="y1"
																id="y1" value="0" /> <input type="hidden" name="x2"
																id="x2" value="0" /> <input type="hidden" name="y2"
																id="y2" value="0" />
														</form>
														<input type="hidden" id="hide_olderTupian" value="" />
														<button type="button" class="btn btn-primary btn-flat"
															style="display:none;" id="sure_SC"
															onclick="uploadPic_cut()">确定</button>
														<input id="quedintupian" style="display:none;"
															type="button" value="确定" onclick="uploadPic()"> <label
															class="col-sm-2 control-label" for="nick">上传头像</label>
														<div class="col-sm-10">
															<div class="avatar-upload">
																<img src="photos/av.jpg" id="touxiangId"
																	style="height:150px;width:150px"
																	class="profile-avatar img-thumbnail" />
																<form id="picuploadform1" class="secondcol"
																	action="position.do?pic1" method="post"
																	enctype="multipart/form-data">
																	<input id="pic4upload1" name="pic4upload" type="file"
																		onchange="javascript:$('#quedintupian').click()"
																		accept="image/*">
																</form>
															</div>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">姓名<span
															style="color:red">*</span>
														</label>
														<div class="col-sm-4">
															<input type="text" class="form-control" id="name_input">
														</div>
														<label class="col-sm-2 control-label">性别<span
															style="color:red">*</span>
														</label>
														<div class="col-sm-4">
															<select class="form-control" id="sex_input"><option
																	value="男">男</option>
																<option value="女">女</option>
															</select>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">会员卡号</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="huiyuanCard_input">
														</div>
														<label class="col-sm-2 control-label">手机<span
															style="color:red">*</span>
														</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																onpaste="return false;" onkeypress="keyPress()"
																id="telephone_input">
														</div>
													</div>
													<div class="form-group">

														<label class="col-sm-2 control-label">关联护理员</label>
														<div class="col-sm-2 control-label"
															style="text-align:left" id="glhly_input"></div>
														<div class="col-sm-2" style="text-align:right"
															onclick="xiugaiguanlianhuliyuan()">
															<input
																class="btn btn-primary btn-flat btn-rad md-trigger"
																type="button" data-modal="guanlian-huliyuan" value="修改">
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">身份证号<span
															style="color:red">*</span>
														</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="identityId_input" oninput="checkIdForBirth(this)">
														</div>
														<label class="col-sm-2 control-label">出生年月</label>
														<div class="col-sm-4">
															<div class="input-group date datetime " data-min-view="2"
																data-date-format="yyyy-mm-dd" style="margin-bottom:0;">
																<input class="form-control" id="birthDay_input"
																	size="16" type="text" value=""
																	placeholder="日期格式：yyyy-mm-dd"> <span
																	class="input-group-addon btn btn-primary"><span
																	class="glyphicon glyphicon-th"></span>
																</span>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="panel-group accordion accordion-semi"
										id="accordion1-2">
										<div class="panel panel-default">
											<div class="panel-heading">
												<h4 class="panel-title">
													<a class="" data-toggle="collapse"
														data-parent="#accordion1-2" href="#ac1-2"> <i
														class="fa fa-angle-right"></i>服务信息 </a>
												</h4>
											</div>
											<div id="ac1-2" class="panel-collapse collapse in">
												<div class="panel-body">
													<form class="form-horizontal">
														<div class="form-group">
															<label class="col-sm-2 control-label">客户来源</label>
															<div class="col-sm-4">
																<select class="form-control" id="customerSource_input">
																	<option value="商业" selected="selected">商业</option>
																	<option value="医保">医保</option>
																	<option value="政府采购">政府采购</option>
																	<option value="其他">其他</option>
																</select>
															</div>
															<label class="col-sm-2 control-label">录入来源</label>
															<div class="col-sm-4">
																<select class="form-control" id="source"
																	disabled="disabled">
																	<option value="1" selected="selected">系统录入</option>
																	<!-- <option value="2">微信新增</option> -->
																</select>
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-2 control-label">所属区域（省）</label>
															<div class="col-sm-4">
																<select class="form-control" id="quyushen_input">

																</select>
															</div>
															<label class="col-sm-2 control-label">所属区域（市）</label>
															<div class="col-sm-4">
																<select class="form-control" id="quyushi_input">

																</select>
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-2 control-label">所属区域（区）</label>
															<div class="col-sm-4">
																<select class="form-control" id="quyuqu_input">

																</select>
															</div>
															<label class="col-sm-2 control-label">所属区域（街道）</label>
															<div class="col-sm-4">
																<select class="form-control" id="quyujiedao_input">

																</select>
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-2 control-label">护理级别</label>
															<div class="col-sm-4">
																<select class="form-control" id="hulijibie_input">
																	<option value="1">1级</option>
																	<option value="2">2级</option>
																	<option value="3">3级</option>
																	<option value="4">4级</option>
																	<option value="5">5级</option>
																	<option value="6">6级</option>
																</select>
															</div>
															<label class="col-sm-2 control-label">客户状态</label>
															<div class="col-sm-4">
																<select class="form-control" id="kehuzhuangtai_input"><option
																		value="0">正常</option>
																	<option value="1">审核不通过</option>
																	<option value="2">待评估</option>
																</select>
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-2 control-label">最后一次评估日期</label>
															<div class="col-sm-4">
																<div class="input-group date datetime "
																	data-min-view="2" data-date-format="yyyy-mm-dd"
																	style="margin-bottom:0;">
																	<input class="form-control" id="hlasttimepg_input"
																		size="16" type="text" value=""
																		placeholder="日期格式：yyyy-mm-dd"> <span
																		class="input-group-addon btn btn-primary"><span
																		class="glyphicon glyphicon-th"></span>
																	</span>
																</div>
															</div>
															<label class="col-sm-2 control-label">评估周期</label>
															<div class="col-sm-4">
																<div class="input-group">
																	<select class="form-control" id="pgzhouqi_input"
																		tag="hedangdang">
																		<option value="1">1</option>
																		<option value="2">2</option>
																		<option value="3">3</option>
																		<option value="4">4</option>
																		<option value="5">5</option>
																		<option value="6">6</option>
																		<option value="7">7</option>
																		<option value="8">8</option>
																		<option value="9">9</option>
																		<option value="10">10</option>
																		<option value="11">11</option>
																		<option value="12">12</option>
																	</select> <span class="input-group-addon">月</span>
																</div>
															</div>
														</div>
														<div class="form-group">
															<label class="col-sm-2 control-label">服务注意点</label>
															<div class="col-sm-10">
																<textarea class="form-control" id="fuzhuyidian_input"></textarea>
															</div>
														</div>
													</form>
												</div>
											</div>
										</div>
									</div>
									<div class="panel-group accordion accordion-semi"
										id="accordion1-3">
										<div class="panel panel-default">
											<div class="panel-heading">
												<h4 class="panel-title">
													<a data-toggle="collapse" data-parent="#accordion1-3"
														href="#ac1-3"> <i class="fa fa-angle-right"></i>详细信息 </a>
												</h4>
											</div>
											<div id="ac1-3" class="panel-collapse collapse in">
												<div class="panel-body form-horizontal">
													<div class="form-group">
														<label class="col-sm-2 control-label">社保卡号</label>
														<div class="col-sm-4">
															<input type="text" class="form-control" id="ssn_input">
														</div>
														<label class="col-sm-2 control-label">民族</label>
														<div class="col-sm-4">
															<select class="form-control" id="familyName_input">
																<option value="汉族">汉族</option>
																<option value="蒙古族">蒙古族</option>
																<option value="回族">回族</option>
																<option value="藏族">藏族</option>
																<option value="维吾尔族">维吾尔族</option>
																<option value="苗族">苗族</option>
																<option value="彝族">彝族</option>
																<option value="壮族">壮族</option>
																<option value="布依族">布依族</option>
																<option value="朝鲜族">朝鲜族</option>
																<option value="满族">满族</option>
																<option value="侗族">侗族</option>
																<option value="瑶族">瑶族</option>
																<option value="白族">白族</option>
																<option value="土家族">土家族</option>
																<option value="哈尼族">哈尼族</option>
																<option value="哈萨克族">哈萨克族</option>
																<option value="傣族">傣族</option>
																<option value="黎族">黎族</option>
																<option value="傈僳族">傈僳族</option>
																<option value="佤族">佤族</option>
																<option value="畲族">畲族</option>
																<option value="高山族">高山族</option>
																<option value="拉祜族">拉祜族</option>
																<option value="水族">水族</option>
																<option value="东乡族">东乡族</option>
																<option value="纳西族">纳西族</option>
																<option value="景颇族">景颇族</option>
																<option value="柯尔克孜族">柯尔克孜族</option>
																<option value="土族">土族</option>
																<option value="达斡尔族">达斡尔族</option>
																<option value="仫佬族">仫佬族</option>
																<option value="羌族">羌族</option>
																<option value="布朗族">布朗族</option>
																<option value="撒拉族">撒拉族</option>
																<option value="毛南族">毛南族</option>
																<option value="仡佬族">仡佬族</option>
																<option value="锡伯族">锡伯族</option>
																<option value="阿昌族">阿昌族</option>
																<option value="普米族">普米族</option>
																<option value="塔吉克族">塔吉克族</option>
																<option value="怒族">怒族</option>
																<option value="乌孜别克族">乌孜别克族</option>
																<option value="俄罗斯族">俄罗斯族</option>
																<option value="鄂温克族">鄂温克族</option>
																<option value="德昂族">德昂族</option>
																<option value="保安族">保安族</option>
																<option value="裕固族">裕固族</option>
																<option value="京族">京族</option>
																<option value="塔塔尔族">塔塔尔族</option>
																<option value="独龙族">独龙族</option>
																<option value="鄂伦春族">鄂伦春族</option>
																<option value="赫哲族">赫哲族</option>
																<option value="门巴族">门巴族</option>
																<option value="珞巴族">珞巴族</option>
																<option value="基诺族">基诺族</option>
															</select>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">职业</label>
														<div class="col-sm-4">
															<select class="form-control" id="occupation_input"><option
																	value="在职">在职</option>
																<option value="退休">退休</option>
																<option value="无业">无业</option>
																<option value="私营">私营</option>
															</select>
														</div>
														<label class="col-sm-2 control-label">婚姻</label>
														<div class="col-sm-4">
															<select class="form-control" id="hunyin_input"><option
																	value="已婚">已婚</option>
																<option value="丧偶">丧偶</option>
																<option value="再婚">再婚</option>
																<option value="未婚">未婚</option>
																<option value="离婚">离婚</option>
																<option value="其他">其他</option>
															</select>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">固话</span>
														</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="homeTel_input">
														</div>
														<label class="col-sm-2 control-label">生活状况</label>
														<div class="col-sm-4">
															<select class="form-control" id="shzk_input"><option
																	value="独居">独居</option>
																<option value="孤老">孤老</option>
																<option value="纯老">纯老</option>
																<option value="其他">其他</option>
															</select>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">血型</label>
														<div class="col-sm-4">
															<select class="form-control" id="bloodType_input"><option
																	value="A型">A型</option>
																<option value="B型">B型</option>
																<option value="O型">O型</option>
																<option value="AB型">AB型</option>
																<option value="RH阴型">RH阴型</option>
																<option value="不详">不详</option>
															</select>
														</div>
														<label class="col-sm-2 control-label">文化程度</label>
														<div class="col-sm-4">
															<input type="text" class="form-control" id="wenhua_input">
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">居住</label>
														<div class="col-sm-4">
															<select class="form-control" id="live_input"><option
																	value="家族同居">家族同居</option>
																<option value="以老护老">以老护老</option>
																<option value="日间独居">日间独居</option>
																<option value="独居">独居</option>
																<option value="日托">日托</option>
																<option value="保姆">保姆</option>
															</select>
														</div>
														<label class="col-sm-2 control-label">居住（其他）</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="liveqita_input">
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">经济</label>
														<div class="col-sm-4">
															<select class="form-control" id="jinji_input"><option
																	value="自主">自主</option>
																<option value="家庭">家庭</option>
																<option value="社保">社保</option>
															</select>
														</div>
														<label class="col-sm-2 control-label">经济（其他）</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="jinjiqita_input">
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">房产</label>
														<div class="col-sm-4">
															<select class="form-control" id="fangchan_input"><option
																	value="自主">自主</option>
																<option value="家庭">家庭</option>
																<option value="租住">租住</option>
															</select>
														</div>
														<label class="col-sm-2 control-label">房产（其他）</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="fangchanqita_input">
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">特殊经历</label>
														<div class="col-sm-4">
															<select id="tsjl_input" class="select2" multiple>
																<option value="战争">战争</option>
																<option value="火灾">火灾</option>
																<option value="地震">地震</option>
																<option value="丧偶  ">丧偶</option>
																<option value="事故">事故</option>
															</select>
														</div>
														<label class="col-sm-2 control-label">特殊经历-其他</label>
														<div class="col-sm-4">
															<input type="text" class="form-control"
																id="tsjlqita_input">
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">家庭与看护管理</label>
														<div class="col-sm-10">
															<textarea class="form-control" id="jtykhgl_input"></textarea>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">兴趣嗜好</label>
														<div class="col-sm-10">
															<textarea class="form-control" id="xqsh_input"></textarea>
														</div>
													</div>
													<div class="form-group">
														<label class="col-sm-2 control-label">生活经历</label>
														<div class="col-sm-10">
															<textarea class="form-control" id="shjl_input"></textarea>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="panel-group accordion accordion-semi"
										id="accordion1-4">
										<div class="panel panel-default">
											<div class="panel-heading">
												<h4 class="panel-title">
													<a class="" data-toggle="collapse"
														data-parent="#accordion1-4" href="#ac1-4"> <i
														class="fa fa-angle-right"></i>地址信息 </a>
												</h4>
											</div>
											<div id="ac1-4" class="panel-collapse collapse in">
												<div class="panel-body">
													<div class="table-responsive">
														<table class="table no-border hover">
															<thead class="no-border">
																<tr>
																	<th style="width:20%;"><strong>地址类型</strong>
																	</th>
																	<th style="width:60%;"><strong>详细地址</strong>
																	</th>
																	<th><strong>操作</strong>
																	</th>
																</tr>
															</thead>
															<a class="label label-primary md-trigger"
																data-modal="addressModel"
																id="addOrEditAddressInformationModel"
																style="display:none;"><i class="fa fa-plus"></i>
															</a>
															<tbody class="no-border-y" id="addressMessge">
																<tr id="addressInformationForInsert">
																	<td></td>
																	<td></td>
																	<td><a class="label label-primary"
																		onclick="addAddressInformation()"><i
																			class="fa fa-plus"></i>
																	</a>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="panel-group accordion accordion-semi"
										id="accordion1-5">
										<div class="panel panel-default">
											<div class="panel-heading">
												<h4 class="panel-title">
													<a class="" data-toggle="collapse"
														data-parent="#accordion1-5" href="#ac1-5"> <i
														class="fa fa-angle-right"></i>紧急联系人信息 </a>
												</h4>
											</div>
											<div id="ac1-5" class="panel-collapse collapse in">
												<div class="panel-body">
													<div class="table-responsive">
														<table class="table no-border hover">
															<thead class="no-border">
																<tr>
																	<th style="width:20%;"><strong>姓名</strong>
																	</th>
																	<th style="width:30%;"><strong>关系</strong>
																	</th>
																	<th style="width:30%;"><strong>联系电话</strong>
																	</th>
																	<th><strong>操作</strong>
																	</th>
																</tr>
															</thead>
															<a class="label label-primary md-trigger"
																data-modal="Emergency-contact"
																id="addOrEditEmergencyContactModel"
																style="display:none;"><i class="fa fa-plus"></i>
															</a>
															<tbody class="no-border-y" id="emergencyContact">
																<tr id="emergencyContactForInsert">
																	<td></td>
																	<td></td>
																	<td></td>
																	<td><a class="label label-primary"
																		onclick="addEmergencyContact()"><i
																			class="fa fa-plus"></i>
																	</a>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>

												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-sm-12" style="text-align:center;">
											<button class="btn btn-flat btn-rad  btn-success md-trigger"
												data-modal="saveAllBasicHeal" onclick="saveAdd()">保存</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<!-- 主页面结束 -->
	<!-- 模态框开始：紧急联系人-->
	<div class="md-modal colored-header custom-width md-effect-9"
		id="Emergency-contact">
		<div class="md-content">
			<div class="modal-header">
				<h3>紧急联系人</h3>
				<button type="button" class="close md-close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
			</div>
			<div class="modal-body form">
				<div class="form-group">
					<label>姓名</label> <input type="text" class="form-control"
						id="jjlxr_name">
				</div>
				<div class="form-group">
					<label>关系</label> <input type="text" class="form-control"
						id="jjlxr_guanxi">
				</div>
				<div class="form-group">
					<label>联系电话</label> <input type="text" class="form-control"
						id="jjlxr_dianhua">
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary btn-flat"
					data-dismiss="modal" id="saveEmergencyContactbtn"
					onclick="saveEmergencyContactModel()">保存</button>
				<button type="button" class="btn btn-primary btn-flat"
					data-dismiss="modal" id="editEmergencyContactbtn">保存修改</button>
				<button type="button" class="btn btn-default btn-flat md-close"
					data-dismiss="modal" id="closeEmergencyContactModel">取消</button>
			</div>
		</div>
	</div>


	<!-- 地址信息 -->
	<div class="md-modal colored-header custom-width md-effect-9"
		id="addressModel" style="width:60%;max-width:60%">
		<div class="md-content">
			<div class="modal-header">
				<h3>地址信息</h3>
				<button type="button" class="close md-close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
			</div>
			<div class="modal-body ">
				<div class="row " style="font-size:12px">
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">地址类型</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<select class="form-control" id="addressTypePopup"><option
								value="0">居住地</option>
							<option value="1">户口所在地</option>
							<option value="2">收信地址</option>
						</select>
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">省</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<select class="form-control" id="provincePopup"></select>
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">市</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<select class="form-control" id="cityPopup"></select>
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">区</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<select class="form-control" id="areaPopup"></select>
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">街道</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="streetPopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">居委/村</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="villageCommitteePopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">路</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="roadPopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">弄</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="lanePopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">号</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="numberPopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">室</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="roomPopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">具体地址</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="specificAddressPopup">
					</div>
					<div class="col-sm-3  col-xs-6 " style="padding-top:6px;">邮编</div>
					<div class="col-sm-3  col-xs-6" style="margin-bottom:6px">
						<input type="text" class="form-control" id="zipCodePopup">
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary btn-flat"
					data-dismiss="modal" id="saveAddressInformationbtn"
					onclick="saveAddressInformationModel()">保存</button>
				<button type="button" class="btn btn-primary btn-flat"
					data-dismiss="modal" id="editAddressInformationbtn">保存修改</button>
				<button type="button" class="btn btn-default btn-flat md-close"
					data-dismiss="modal" id="closeAddressInformationModel">取消</button>
			</div>
		</div>
	</div>


	<!-- 关联医师 -->
	<div class="md-modal colored-header custom-width md-effect-9"
		id="guanlian-doctor">
		<div class="md-content" onclick="checkSelect_t()">
			<div class="modal-header">
				<h3>关联医师</h3>
				<button type="button" class="close md-close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<input type="hidden" id="hfids_t"> <input type="hidden"
					id="hname_t"> <input type="hidden" id="allchooseId_t">
				<input type="hidden" id="allchooseName_t">
			</div>
			<div class="modal-body " id="erciquerenxinxi">
				<div class="row">
					<div class="col-sm-1"
						style="clear:both;text-align: center; vertical-align: middle; height: 34px; line-height: 34px;width:100px;">
						<label>姓名</label>
					</div>
					<div class="col-sm-2" style="margin-bottom:10px;">
						<input class="form-control" type="text" style="width: 100%"
							id="name_input_t">
					</div>
					<div class="col-sm-1" style="margin-bottom:5px;">
						<button class="btn btn-primary"
							style="margin-bottom: 0px !important; height: 34px;"
							onclick="query_t()">查询</button>
					</div>
				</div>
				<!-- 数据表格开始 -->
				<div class="row">
					<div class="col-sm-12">
						<table class="table table-bordered dataTable hover" id="datatable"
							aria-describedby="datatable_info">
							<thead>
								<tr role="row">
									<th style="width:2%;"><input id="firstcheckbox_t"
										type="checkbox" class="col_selector_t"
										onclick="selectAll_t();">
									</th>
									<th><strong>姓名</strong>
									</th>
									<th><strong>站点名称</strong>
									</th>
									<th><strong>职称</strong>
									</th>
								</tr>
							</thead>
							<tbody id="datacontainer_t" role="alert" aria-live="polite"
								aria-relevant="all">
							</tbody>
						</table>
					</div>
				</div>
				<!-- 数据表格结束 -->
				<!-- 数据条数提示开始 -->
				<div class="row">
					<div class="col-sm-12">
						<div class="pull-left">
							<div id="datatable_info_t" class="dataTables_info">当前显示0
								条总记录中的第0-0条</div>
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
				<!-- 数据条数提示结束 -->
				<!-- 分页条开始 -->
				<div class="row">
					<div class="col-sm-4" style="clear:both;">
						<div class="pull-left" style="margin:10px 0"
							id="datatable2_length">
							<label class="pull-left" style="margin:10px 0;">每页</label> <label
								class="pull-left" style="margin:10px 0;"> <select
								id="pageSizeSelector_t" class="form-control"
								aria-controls="datatable2" size="1" name="datatable2_length"
								onchange="query_t()">
									<option selected="selected" value="10">10</option>
									<option value="25">25</option>
									<option value="50">50</option>
									<option value="100">100</option>
							</select> </label> <label class="pull-left" style="margin:10px 0;">条</label>
						</div>
					</div>
					<div class="col-sm-8">
						<div class="pull-right">
							<div class="dataTables_paginate paging_bs_normal">
								<ul id="paginationArea_t" class="pagination">
									<li class="prev disabled"><a href="#"><span
											class="fa fa-angle-left"></span>&nbsp;上一页</a>
									</li>
									<li class="active"><a href="#">1</a>
									</li>
									<li class="next"><a href="#">下一页&nbsp;<span
											class="fa fa-angle-right"></span>
									</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<!-- 分页条结束 -->
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary btn-flat md-close"
					data-dismiss="modal" onclick="saveglys()">保存</button>
				<button type="button" id="glysquxiao" style="display:none;"
					class="btn btn-default btn-flat md-close" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>

	<!-- 关联护理员 -->
	<div class="md-modal colored-header custom-width md-effect-9"
		id="guanlian-huliyuan"
		style="overflow-y:auto;margin-top: 20px;width:50%;">
		<div class="md-content" onclick="checkSelect2()">
			<div class="modal-header">
				<h3>关联护理员</h3>
				<button type="button" class="close md-close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<input type="hidden" id="hfids2"> <input type="hidden"
					id="hname2"> <input type="hidden" id="allchooseId2">
				<input type="hidden" id="allchooseName2"> <input
					type="hidden" id="hlyId"> <input type="hidden" id="hlyName">
			</div>
			<div class="modal-body " id="erciquerenxinxi">
				<div class="row">
					<div class="col-sm-1"
						style="clear:both;text-align: center; vertical-align: middle; height: 34px; line-height: 34px;width:100px;">
						<label>姓名</label>
					</div>
					<div class="col-sm-2" style="margin-bottom:10px;">
						<input class="form-control" type="text" style="width: 100%"
							id="name_input_t2">
					</div>
					<div class="col-sm-1" style="margin-bottom:5px;">
						<button class="btn btn-primary"
							style="margin-bottom: 0px !important; height: 34px;"
							onclick="query_t2()">查询</button>
					</div>
				</div>
				<!-- 数据表格开始 -->
				<div class="row">
					<div class="col-sm-12">
						<table class="table table-bordered dataTable hover" id="datatable"
							aria-describedby="datatable_info">
							<thead>
								<tr role="row">
									<!-- <th style="width:2%;"><input id="firstcheckbox2" type="checkbox" class="col_selector_t2" onclick="selectAll2();"></th> -->
									<th style="width:2%;"></th>
									<th><strong>姓名</strong>
									</th>
									<th><strong>站点名称</strong>
									</th>
									<th><strong>职称</strong>
									</th>
								</tr>
							</thead>
							<tbody id="datacontainer_t2" role="alert" aria-live="polite"
								aria-relevant="all">
							</tbody>
						</table>
					</div>
				</div>
				<!-- 数据表格结束 -->
				<!-- 数据条数提示开始 -->
				<div class="row">
					<div class="col-sm-12">
						<div class="pull-left">
							<div id="datatable_info_t2" class="dataTables_info">当前显示0
								条总记录中的第0-0条</div>
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
				<!-- 数据条数提示结束 -->
				<!-- 分页条开始 -->
				<div class="row">
					<div class="col-sm-4" style="clear:both;">
						<div class="pull-left" style="margin:10px 0"
							id="datatable2_length">
							<label class="pull-left" style="margin:10px 0;">每页</label> <label
								class="pull-left" style="margin:10px 0;"> <select
								id="pageSizeSelector_t2" class="form-control"
								aria-controls="datatable2" size="1" name="datatable2_length"
								onchange="query_t2()">
									<option selected="selected" value="10">10</option>
									<option value="25">25</option>
									<option value="50">50</option>
									<option value="100">100</option>
							</select> </label> <label class="pull-left" style="margin:10px 0;">条</label>
						</div>
					</div>
					<div class="col-sm-8">
						<div class="pull-right">
							<div class="dataTables_paginate paging_bs_normal">
								<ul id="paginationArea_t2" class="pagination">
									<li class="prev disabled"><a href="#"><span
											class="fa fa-angle-left"></span>&nbsp;上一页</a>
									</li>
									<li class="active"><a href="#">1</a>
									</li>
									<li class="next"><a href="#">下一页&nbsp;<span
											class="fa fa-angle-right"></span>
									</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<!-- 分页条结束 -->
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary btn-flat md-close"
					data-dismiss="modal" onclick="savehly()">保存</button>
				<button type="button" id="glhlyquxiao" style="display:none;"
					class="btn btn-default btn-flat md-close" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>

	<div class="md-overlay"></div>


	<script src="js/jquery.js"></script>
	<script type="text/javascript"
		src="js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
	<script type="text/javascript"
		src="js/jquery.sparkline/jquery.sparkline.min.js"></script>
	<script type="text/javascript"
		src="js/jquery.easypiechart/jquery.easy-pie-chart.js"></script>
	<script src="js/jquery.ui/jquery-ui.js" type="text/javascript"></script>
	<script type="text/javascript"
		src="js/jquery.nestable/jquery.nestable.js"></script>
	<script type="text/javascript"
		src="js/bootstrap.switch/bootstrap-switch.min.js"></script>
	<script type="text/javascript"
		src="js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<script src="js/jquery.select2/select2.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.slider/js/bootstrap-slider.js"
		type="text/javascript"></script>
	<script type="text/javascript"
		src="js/jquery.gritter/js/jquery.gritter.js"></script>
	<script type="text/javascript"
		src="js/jquery.niftymodals/js/jquery.modalEffects.js"></script>
	<script type="text/javascript" src="js/masonry.js"></script>
	<script type="text/javascript" src="js/jquery.crop/js/jquery.Jcrop.js"></script>

	<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
	<script src="js/jquery.upload/js/jquery.iframe-transport.js"></script>
	<!-- The basic File Upload plugin -->
	<script src="js/jquery.upload/js/jquery.fileupload.js"></script>
	<script type="text/javascript" src="js/behaviour/general.js"></script>
	<script type="text/javascript" src="js/jquery.icheck/icheck.min.js"></script>


	<script type="text/javascript">
		//根据身份证自动设置出生年月
       function checkIdForBirth(par){
    		var idNumber = $.trim($(par).val());
    		if(idNumber != null && idNumber != ""){
    			if(idNumber.length == 18){
    				$("#birthDay_input").val(idNumber.substr(6,4) + "-" + idNumber.substr(10,2) + "-" + idNumber.substr(12,2));
    			}
    		}
       }
    	
       //只能输入数字0-9
       function keyPress() {
            var theEvent = window.event || arguments.callee.caller.arguments[0];
    		var keyCode = theEvent.keyCode || theEvent.which;
    		if ((keyCode < 48 || keyCode > 57) && keyCode != 8 && keyCode != 37 && keyCode != 39) {
               theEvent.preventDefault();
            }
       } 
     
    
       //获取市信息
       function getquyushixinxi(id){
	        var result = new Array();
	    	result = getAddresses(id);
	        var html="";
	        for(var i=0;i<result.length;i++){
	        	html+="<option value=\""+result[i].id+"\">"+result[i].name+"</option>";
	        }
	        $("#quyushi_input").html(html);
       }
      
       //获取区信息
       function getquyuquxinxi(id){
	        var result = new Array();
	    	result = getAddresses(id);
	        var html="";
	        for(var i=0;i<result.length;i++){
	        	html+="<option value=\""+result[i].id+"\">"+result[i].name+"</option>";
	        }
	        $("#quyuqu_input").html(html);
       }
      
       //获取街道信息
       function getquyujiedaoxinxi(id){
	        var result = new Array();
	    	result = getAddresses(id);
	        var html="";
	        for(var i=0;i<result.length;i++){
	        	html+="<option value=\""+result[i].id+"\">"+result[i].name+"</option>";
	        }
	        $("#quyujiedao_input").html(html);
       }
      
       $(document).ready(function(){
	        //initialize the javascript
	        App.init(); 
	        var homeUrl = "<%=request.getContextPath()%>" + "/welcome.do?main";
	  		$(".navbar-brand").attr("href",homeUrl);
			//设置关联护理员模态框高度
			var windowHeight=$(window).height();
	    	$("#guanlian-huliyuan").css("height", (windowHeight - 100) + "px");
			
	        ///主页面 地址////////////////////////////////////////////////////////////////////////////////////////////
	        //获取省  
	        var result = new Array();
	        result = getAddresses(4897);
	        var html="";
	        for(var i=0;i<result.length;i++){
	        	html+="<option value=\""+result[i].id+"\">"+result[i].name+"</option>";
	        }
	        $("#quyushen_input").html(html);
	        
	        //获取默认市
	        getquyushixinxi($("#quyushen_input").val());
	        //获取默认区
	        getquyuquxinxi($("#quyushi_input").val());
	        //获取默认街道
	        getquyujiedaoxinxi($("#quyuqu_input").val());
	        
	        $("#quyushen_input").change(function(e){
	        	getquyushixinxi($("#quyushen_input").val());
	        	getquyuquxinxi($("#quyushi_input").val());
	        	getquyujiedaoxinxi($("#quyuqu_input").val());
	        });
	        
	        $("#quyushi_input").change(function(e){
	        	getquyuquxinxi($("#quyushi_input").val());
	        	getquyujiedaoxinxi($("#quyuqu_input").val());
	        });
	        
	        $("#quyuqu_input").change(function(e){
	        	getquyujiedaoxinxi($("#quyuqu_input").val());
	        });


			///弹出框 地址信息////////////////////////////////////////////////////////////////////////////////////////////
			$("#provincePopup").change(function(e){
        		getquyushixinxiT($("#provincePopup").val());
        		getquyuquxinxiT($("#cityPopup").val());
        	});
        	
        	$("#cityPopup").change(function(e){
        		getquyuquxinxiT($("#cityPopup").val());
        	});
        	////////////////////////////////////////////////////////////////////////////////////////////
	   });		
	  
	   //新增紧急联系人信息
	   function addEmergencyContact(){
			//重置弹窗
			$("#jjlxr_name").val("");
			$("#jjlxr_guanxi").val("");
			$("#jjlxr_dianhua").val("");
				
			$("#saveEmergencyContactbtn").show();
			$("#editEmergencyContactbtn").hide();
			$("#addOrEditEmergencyContactModel").click();
		}
		//保存紧急联系人信息
		function saveEmergencyContactModel(){
			var jjlxr_name = $("#jjlxr_name").val();
			var jjlxr_guanxi = $("#jjlxr_guanxi").val();
			var jjlxr_dianhua = $("#jjlxr_dianhua").val();
			if(jjlxr_name == "" || jjlxr_name == null){
				alert("姓名必填");
				return;
			}
			if(jjlxr_guanxi == "" || jjlxr_guanxi == null){
				alert("关系必填");
				return;
			}
			if(jjlxr_dianhua == "" || jjlxr_dianhua == null){
				alert("联系电话必填");
				return;
			}
			var html = "";
			html += "<tr>";
			html += "<td>" + $("#jjlxr_name").val() + "</td>";
			html += "<td>" + $("#jjlxr_guanxi").val() + "</td>";
			html += "<td>" + $("#jjlxr_dianhua").val() + "</td>";
			html += "<td><a class=\"label label-default\" onclick=\"editEmergencyContactModel(this)\"><i class=\"fa fa-pencil\"></i></a> <a class=\"label label-danger\" onclick=\"$(this).parent().parent().remove();$('#emergencyContactForInsert').show();\"><i class=\"fa fa-times\"></i></a></td>";
			html += "</tr>";
			$(html).insertBefore("#emergencyContactForInsert");
			if($("#emergencyContact tr").length == 4){//满三条信息后隐藏新增条目
				$("#emergencyContactForInsert").hide();
			} 
			$("#closeEmergencyContactModel").click();
		}
		//编辑保存紧急联系人信息
		function editEmergencyContactModel(par){
			$("#saveEmergencyContactbtn").hide();
			$("#editEmergencyContactbtn").show();
			
        	$("#jjlxr_name").val($(par).parent().prev().prev().prev().html());
        	$("#jjlxr_guanxi").val($(par).parent().prev().prev().html());
        	$("#jjlxr_dianhua").val($(par).parent().prev().html());
			
			$("#addOrEditEmergencyContactModel").click();
			
			document.getElementById("editEmergencyContactbtn").onclick = function(){	
				var jjlxr_name = $("#jjlxr_name").val();
				var jjlxr_guanxi = $("#jjlxr_guanxi").val();
				var jjlxr_dianhua = $("#jjlxr_dianhua").val();
				if(jjlxr_name == "" || jjlxr_name == null){
					alert("姓名必填");
					return;
				}
				if(jjlxr_guanxi == "" || jjlxr_guanxi == null){
					alert("关系必填");
					return;
				}
				if(jjlxr_dianhua == "" || jjlxr_dianhua == null){
					alert("联系电话必填");
					return;
				}
				$(par).parent().prev().html(jjlxr_dianhua);
				$(par).parent().prev().prev().html(jjlxr_guanxi);
				$(par).parent().prev().prev().prev().html(jjlxr_name);
				$("#closeEmergencyContactModel").click();
			}
		}
		////////////////////////////////////////////////////////////////////////////////////////////
		
		
		//弹出框获取市信息
      	function getquyushixinxiT(id){
	        var result = new Array();
	    	result = getAddresses(id);
	        var html = "";
	        for(var i = 0;i < result.length;i++){
	        	html += "<option value=\"" + result[i].id + "\">" + result[i].name + "</option>";
	        }
	        $("#cityPopup").html(html);
      	}
     	//弹出框获取区信息
      	function getquyuquxinxiT(id){
	        var result = new Array();
	    	result = getAddresses(id);
	        var html = "";
	        for(var i = 0;i < result.length;i++){
	        	html += "<option value=\"" + result[i].id + "\">" + result[i].name + "</option>";
	        }
	        $("#areaPopup").html(html);
      	}
		//新增地址信息
		function addAddressInformation(){
			//重置弹窗
			$("#addressTypePopup").val(0);//地址类型
        	var result = new Array();
        	result = getAddresses(4897);
        	var html = "";
        	for(var i = 0;i < result.length;i++){
        		html +="<option value=\"" + result[i].id + "\">" + result[i].name + "</option>";
        	}
        	$("#provincePopup").html(html);//获取省  
        	getquyushixinxiT($("#provincePopup").val());//获取默认市
        	getquyuquxinxiT($("#cityPopup").val());//获取默认区
        	$("#streetPopup").val("");
        	$("#villageCommitteePopup").val("");
        	$("#roadPopup").val("");
        	$("#lanePopup").val("");
        	$("#numberPopup").val("");
        	$("#roomPopup").val("");
        	$("#specificAddressPopup").val("");
        	$("#zipCodePopup").val("");
			
			$("#saveAddressInformationbtn").show();
			$("#editAddressInformationbtn").hide();
			$("#addOrEditAddressInformationModel").click();
		}
		//保存地址信息
		function saveAddressInformationModel(){
			var addressTypePopup = $("#addressTypePopup").val();
			var addressTypePopupText = $("#addressTypePopup").find("option:selected").text();
			var provincePopup = $("#provincePopup").val();
			var cityPopup = $("#cityPopup").val();
			var areaPopup = $("#areaPopup").val();
			
			var streetPopup = $.trim($("#streetPopup").val());
        	var villageCommitteePopup = $.trim($("#villageCommitteePopup").val());
        	var roadPopup = $.trim($("#roadPopup").val());
        	var lanePopup = $.trim($("#lanePopup").val());
        	var numberPopup = $.trim($("#numberPopup").val());
        	var roomPopup = $.trim($("#roomPopup").val());
			var specificAddressPopup = $.trim($("#specificAddressPopup").val());
        	var zipCodePopup = $.trim($("#zipCodePopup").val());
			
			var html = "";
			html += "<tr>";
			html += "<td>" + addressTypePopupText + "<input type='hidden' value='" + addressTypePopup + "'></td>";
			
			html += "<td>" + getNameById(provincePopup) + "," + getNameById(cityPopup) + "," + getNameById(areaPopup);
			if(streetPopup != null && streetPopup != ""){
				html += "," + streetPopup;
			}
			if(villageCommitteePopup != null && villageCommitteePopup != ""){
				html += "," + villageCommitteePopup;
			}
			if(roadPopup != null && roadPopup != ""){
				html += "," + roadPopup;
			}
			if(lanePopup != null && lanePopup != ""){
				html += "," + lanePopup;
			}
			if(numberPopup != null && numberPopup != ""){
				html += "," + numberPopup;
			}
			if(roomPopup != null && roomPopup != ""){
				html += "," + roomPopup;
			}
			if(specificAddressPopup != null && specificAddressPopup != ""){
				html += "," + specificAddressPopup;
			}
			if(zipCodePopup != null && zipCodePopup != ""){
				html += "," + zipCodePopup;
			}
			html += "<input type='hidden' value='" + provincePopup + "'>";
			html += "<input type='hidden' value='" + cityPopup + "'>";
			html += "<input type='hidden' value='" + areaPopup + "'>";
			html += "<input type='hidden' value='" + streetPopup + "'>";
			html += "<input type='hidden' value='" + villageCommitteePopup + "'>";
			html += "<input type='hidden' value='" + roadPopup + "'>";
			html += "<input type='hidden' value='" + lanePopup + "'>";
			html += "<input type='hidden' value='" + numberPopup + "'>";
			html += "<input type='hidden' value='" + roomPopup + "'>";
			html += "<input type='hidden' value='" + specificAddressPopup + "'>";
			html += "<input type='hidden' value='" + zipCodePopup + "'></td>";
			
			html += "<td><a class=\"label label-default\" onclick=\"editAddressInformationModel(this)\"><i class=\"fa fa-pencil\"></i></a> <a class=\"label label-danger\" onclick=\"$(this).parent().parent().remove();$('#addressInformationForInsert').show();\"><i class=\"fa fa-times\"></i></a></td>";
			html += "</tr>";
			$(html).insertBefore("#addressInformationForInsert");
			if($("#addressMessge tr").length == 4){//满三条信息后隐藏新增条目
				$("#addressInformationForInsert").hide();
			} 
			$("#closeAddressInformationModel").click();
		}
		//编辑保存紧急联系人信息
		function editAddressInformationModel(par){
			$("#saveAddressInformationbtn").hide();
			$("#editAddressInformationbtn").show();
			
        	$("#addressTypePopup").val($(par).parent().prev().prev().find("input").val());
        	$("#provincePopup").val($(par).parent().prev().find("input:eq(0)").val());
        	getquyushixinxiT($("#provincePopup").val());//获取默认市
        	$("#cityPopup").val($(par).parent().prev().find("input:eq(1)").val());
        	getquyuquxinxiT($("#cityPopup").val());//获取默认区
			$("#areaPopup").val($(par).parent().prev().find("input:eq(2)").val());
			
			$("#streetPopup").val($(par).parent().prev().find("input:eq(3)").val());
        	$("#villageCommitteePopup").val($(par).parent().prev().find("input:eq(4)").val());
        	$("#roadPopup").val($(par).parent().prev().find("input:eq(5)").val());
        	$("#lanePopup").val($(par).parent().prev().find("input:eq(6)").val());
        	$("#numberPopup").val($(par).parent().prev().find("input:eq(7)").val());
        	$("#roomPopup").val($(par).parent().prev().find("input:eq(8)").val());
			$("#specificAddressPopup").val($(par).parent().prev().find("input:eq(9)").val());
        	$("#zipCodePopup").val($(par).parent().prev().find("input:eq(10)").val());
			
			$("#addOrEditAddressInformationModel").click();
			
			document.getElementById("editAddressInformationbtn").onclick = function(){	
				var addressTypePopup = $("#addressTypePopup").val();
				var addressTypePopupText = $("#addressTypePopup").find("option:selected").text();
				var provincePopup = $("#provincePopup").val();
				var cityPopup = $("#cityPopup").val();
				var areaPopup = $("#areaPopup").val();
				
				var streetPopup = $.trim($("#streetPopup").val());
	        	var villageCommitteePopup = $.trim($("#villageCommitteePopup").val());
	        	var roadPopup = $.trim($("#roadPopup").val());
	        	var lanePopup = $.trim($("#lanePopup").val());
	        	var numberPopup = $.trim($("#numberPopup").val());
	        	var roomPopup = $.trim($("#roomPopup").val());
				var specificAddressPopup = $.trim($("#specificAddressPopup").val());
	        	var zipCodePopup = $.trim($("#zipCodePopup").val());
				
				var html = "";
				html += getNameById(provincePopup) + "," + getNameById(cityPopup) + "," + getNameById(areaPopup);
				if(streetPopup != null && streetPopup != ""){
					html += "," + streetPopup;
				}
				if(villageCommitteePopup != null && villageCommitteePopup != ""){
					html += "," + villageCommitteePopup;
				}
				if(roadPopup != null && roadPopup != ""){
					html += "," + roadPopup;
				}
				if(lanePopup != null && lanePopup != ""){
					html += "," + lanePopup;
				}
				if(numberPopup != null && numberPopup != ""){
					html += "," + numberPopup;
				}
				if(roomPopup != null && roomPopup != ""){
					html += "," + roomPopup;
				}
				if(specificAddressPopup != null && specificAddressPopup != ""){
					html += "," + specificAddressPopup;
				}
				if(zipCodePopup != null && zipCodePopup != ""){
					html += "," + zipCodePopup;
				}
				html += "<input type='hidden' value='" + provincePopup + "'>";
				html += "<input type='hidden' value='" + cityPopup + "'>";
				html += "<input type='hidden' value='" + areaPopup + "'>";
				html += "<input type='hidden' value='" + streetPopup + "'>";
				html += "<input type='hidden' value='" + villageCommitteePopup + "'>";
				html += "<input type='hidden' value='" + roadPopup + "'>";
				html += "<input type='hidden' value='" + lanePopup + "'>";
				html += "<input type='hidden' value='" + numberPopup + "'>";
				html += "<input type='hidden' value='" + roomPopup + "'>";
				html += "<input type='hidden' value='" + specificAddressPopup + "'>";
				html += "<input type='hidden' value='" + zipCodePopup + "'>";
			
				$(par).parent().prev().html(html);
				$(par).parent().prev().prev().html(addressTypePopupText + "<input type='hidden' value='" + addressTypePopup + "'>");
				$("#closeAddressInformationModel").click();
			}
		}
		
		////////////////////////////////////////////////////////////////////////////////////////////
		function getIdByRoleName(name){
			 var id="0";
				 jQuery.ajax({
			          type : "post",
			          async:false,
			          url : "addOlders.do?getIdByRoleName",
			          dataType : "json",
			          data: {
			               "RoleName":name
			          },
			          success : function(data){
			              if(data.des=="success"){
			              		id = data.id;
			              }else if(data.des=="failure"){
			                 alert("查询失败");
			              }
			          },
			          error:function(){
				           alert("error");
			          }
		     	});
			return id;
		}
		
		//修改关联医师
		var currentshownpage_t = 1;
		function xiugaiguanlianyishi(){
			query_t();
		}
		function query_t() {
			go2page_t(1);
		}
		function go2page_t(pagenumber){
			var roleIds = getIdByRoleName("医师");
			var pagesize = $("#pageSizeSelector_t option:selected").val();
			var name2search = $("#name_input_t").val();
			
			var reqmsg="{'action':'QUERY_EMPLOYEE_LIST_REQUEST','page':{'pageno':'" + pagenumber + "','pagesize':'" + pagesize + "'},'content':{\"siteListShow\":\"true\",\"dataDicListShow\":\"true\",";
			
			if (name2search != null && name2search != "") {
				reqmsg += "\"name_like\":\"" + name2search + "\",";
			}
			reqmsg += "\"roleIds\":\""+roleIds+"\",";
			reqmsg += "}}";
		
		    jQuery.ajax({
		          type : "post",
		          async:true,
		          url : "employee.do?handler",
		          dataType : "json",
		          data: {
		               "reqmsg":reqmsg
		          },
		          success : function(data){
		              if(data.des=="success"){
		            	  changeData_t(data);
		              }else if(data.des=="failure"){
		                 alert("查询失败");
		              }
		          },
		          error:function(){
			           alert("error");
		          }
		     });
		}
		function changeData_t(data){
			var htmlcode = "";
			if (data.content != null) {
				var allchooseId2="";
				var allchooseName2="";
				jQuery.each(data.content.employeeList, function(i, item) {
					allchooseId2=allchooseId2+item.id+",";
					allchooseName2=allchooseName2+item.name+",";
					allchooseId2.replace(",,",",");
					allchooseName2.replace(",,",",");
				});
				
				if(allchooseId2 != ""){
					allchooseId2 = allchooseId2.substr(0,allchooseId2.length-1)
				}
				if(allchooseName2 != ""){
					allchooseName2 = allchooseName2.substr(0,allchooseName2.length-1)
				}
				$("#allchooseId_t").val(allchooseId2);
				$("#allchooseName_t").val(allchooseName2);
			
				jQuery.each(data.content.employeeList, function(i, item) {
				    htmlcode += "<tr class=\"gradeA odd\">";
					htmlcode += "<td><input id=\""+item.id+"\" value=\""+item.name+"\" name=\"index_t\" type=\"checkbox\" onclick=\"selectOne_t("+item.id+",'"+item.name+"')\" class=\"col_selector_t\"></td>";
				  
				    htmlcode += "<td>" + item.name + "</td>";	
				    if (item.siteList != null && item.siteList.length > 0) {//所属站点
				    	if(item.siteList[0] != null){
							var siteName = "";
							jQuery.each(item.siteList, function(j, item2) {
								if(item2 != null){
									siteName += item2.name + ",";
								}
							});
							if(siteName != ""){
								siteName = siteName.substring(0, siteName.length-1);
							}
							htmlcode += "<td>"+siteName+"</td>";
						}else{
				    		htmlcode += "<td>无</td>";
				    	}	
					}else{
				    	htmlcode += "<td>无</td>";
				    }	
				    if(item.zhichengs != null && item.zhichengs != ""){
				    	htmlcode += "<td>" + item.zhichengs + "</td>";	
				    }else{
				    	htmlcode += "<td>无</td>";			    
				    }			
					htmlcode += "</tr>";
				});
			}
			$("#datacontainer_t").html(htmlcode);
			if (data.page != null) {
				genaratePaginateHtml_t(data.page.pageno, data.page.pageCount);
				genarateRecordNumberHtml_t(data.page.pageno, data.page.pagesize, data.page.recordCount);
			} else {
				genaratePaginateHtml_t(1, 1);
				genarateRecordNumberHtml_t(1, 10, 0);
			}
			checkSelect_t();
		}
		/**
		 * 生成分页信息
		 * @method genaratePaginateHtml_t
		 * @param {Number} currentpage 当前页
		 * @param {Number} totalpage 总页数
		 */
		function genaratePaginateHtml_t(currentpage, totalpage, pagesize) {
			currentshownpage_t = currentpage;
		
			var htmlcode = "";
			
			// 	上一页
			if (currentpage > 1) {
				htmlcode += "<li class=\"pre\"><a href=\"#\" onclick=\"go2page_t('" + (currentpage - 1) + "')\"><span class=\"fa fa-angle-left\"></span>&nbsp;上一页</a></li>";
			} else {
				htmlcode += "<li class=\"pre disabled\"><a href=\"#\"><span class=\"fa fa-angle-left\"></span>&nbsp;上一页</a></li>";
			}
			
			// 	具体页码
			if (totalpage <= 5) {
				for (var i = 1; i <= totalpage; i++) {
					if (currentpage == i) {
						htmlcode += "<li class=\"active\"><a href=\"#\">" + i + "</a></li>";
					} else {
						htmlcode += "<li><a href=\"#\" onclick=\"go2page_t('" + i + "')\">" + i + "</a></li>";
					}
				}
			} else {
				var startpage = currentpage;
				var endpage = currentpage;
				while (true) {
					if (endpage - startpage >= 4) {
						break;
					} else {
						if (startpage > 1) {
							startpage = startpage - 1;
						}
						if (endpage < totalpage) {
							endpage = endpage - (-1);
						}
					}
				}
				
				for (var i = startpage; i <= endpage; i++) {
					if (currentpage == i) {
						htmlcode += "<li class=\"active\"><a href=\"#\">" + i + "</a></li>";
					} else {
						htmlcode += "<li><a href=\"#\" onclick=\"go2page_t('" + i + "')\">" + i + "</a></li>";
					}
				}
			}
			
			// 	下一页
			if (totalpage > currentpage) {
				htmlcode += "<li class=\"next\"><a href=\"#\" onclick=\"go2page_t('" + (parseInt(currentpage) + 1) + "')\">下一页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
			} else {
				htmlcode += "<li class=\"next disabled\"><a href=\"#\">下一页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
			}
			$("#paginationArea_t").html(htmlcode);
		}
		/**
		 * 生成记录数信息
		 * @method genarateRecordNumberHtml_t
		 * @param {Number} currentpage 当前页
		 * @param {Number} pagesize 每页记录条目数
		 * @param {Number} totalRecord 总记录数
		 */
		function genarateRecordNumberHtml_t(currentpage, pagesize, totalRecord) {
			var recordInfos = "";
			if (totalRecord > 0) {
			    recordInfos = "当前显示" + totalRecord + "条总记录";
				recordInfos += "中第" + ((currentpage - 1) * pagesize + 1) + "-";
				if (currentpage * pagesize > totalRecord) {
					recordInfos += totalRecord;
				} else {
					recordInfos += currentpage * pagesize;
				}
				recordInfos += "条 ";
			} else {
				recordInfos = "当前显示0 条总记录中的第0-0条";
			}
			
			$("#datatable_info_t").html(recordInfos);
		}
       function checkSelect_t() {//检查所有复选框
            var checklist = document.getElementsByName("index_t");
            var haveChoose = document.getElementById("hfids_t").value.toString();
            var haveChoose2 = new Array();
            var haveChoose2 = haveChoose.split(",");
            if (haveChoose == "") {
                for (var i = 0; i < checklist.length; i++) {
                    checklist[i].checked = 0;
                }
            } else {
                for (var i = 0; i < checklist.length; i++) {
                    for (var j = 0; j < haveChoose2.length; j++) {
                        if (checklist[i].id == haveChoose2[j]) {
                            checklist[i].checked = 1;
                        }
                    }
                }
            }
        }
  		function selectOne_t(id, name) {//单框
            if (document.getElementById(id).checked) {
                if (document.getElementById("hfids_t").value == "") {
                    document.getElementById("hfids_t").value = document.getElementById("hfids_t").value + id;
                } else {
                    document.getElementById("hfids_t").value = document.getElementById("hfids_t").value + "," + id;
                }
                if (document.getElementById("hname_t").value == "") {
                    document.getElementById("hname_t").value = document.getElementById("hname_t").value + name;
                } else {
                    document.getElementById("hname_t").value = document.getElementById("hname_t").value + "," + name;
                }
            } else {
                var p = document.getElementById("hfids_t").value.toString();
                var pp = p.split(",");
                if (pp[0] == id) {
                    var strings = p.replace(id+",", "");
                    document.getElementById("hfids_t").value = strings;
                }else{
                    var strings = p.replace("," + id, "");
                    document.getElementById("hfids_t").value = strings;
                }

                var p2 = document.getElementById("hname_t").value.toString();
                var pp2 = p2.split(",");
                if (pp2[0] == name) {
                    var strings2 = p2.replace(name + ",", "");
                    document.getElementById("hname_t").value = strings2;
                } else {
                    var strings2 = p2.replace("," + name, "");
                    document.getElementById("hname_t").value = strings2;
                }
            }
            document.getElementById("firstcheckbox_t").checked = false;
   		}
		function selectAll_t() {//全选框
            if (document.getElementById("firstcheckbox_t").checked) {
                document.getElementById("hfids_t").value = $("#allchooseId_t").val();
                
                document.getElementById("hname_t").value = $("#allchooseName_t").val();
                var checklist = document.getElementsByName("index_t");
                for (var i = 0; i < checklist.length; i++) {
                    checklist[i].checked = 1;
                }
            } else {
                document.getElementById("hfids_t").value = "";
                document.getElementById("hname_t").value = "";
                var checklist = document.getElementsByName("index_t");
                for (var i = 0; i < checklist.length; i++) {
                    checklist[i].checked = 0;
                }
            }
		}
		//保存关联医师
		function saveglys(id,name){
			var html="";
			if(document.getElementById("hfids_t").value != "" && document.getElementById("hname_t").value != ""){
			var headUrl = "<%=request.getContextPath()%>";
			var ids = document.getElementById("hfids_t").value.split(",");
			var names = document.getElementById("hname_t").value.split(",");
			for(var i=0;i<ids.length;i++){
				html+="<a target=\"_blank\" href=\""+headUrl+"/daeEmployee.do?main&employeeId="+ids[i]+"\" style=\"margin-right:10px\" id=\"juse"+i+"\">"+names[i]+"</a><input id=\"juseId"+i+"\" type=\"hidden\" value=\""+ids[i]+"\">";
			}
			$("#glys_input").html(html);
			}else{
				$("#glys_input").html("");
			}
		}
		
		//修改关联护理员
		var currentshownpage_t2 = 1;
		function xiugaiguanlianhuliyuan(){
			query_t2();
		}
		function query_t2() {
			go2page_t2(1);
		}
		function go2page_t2(pagenumber){
			//var roleIds = getIdByRoleName("护理员");
			var pagesize = $("#pageSizeSelector_t2 option:selected").val();
			var name2search = $("#name_input_t2").val();
			
			var reqmsg="{'action':'QUERY_EMPLOYEE_LIST_REQUEST','page':{'pageno':'" + pagenumber + "','pagesize':'" + pagesize + "'},'content':{\"siteListShow\":\"true\",\"dataDicListShow\":\"true\",";
			
			if (name2search != null && name2search != "") {
				reqmsg += "\"name_like\":\"" + name2search + "\",";
			}
			//reqmsg += "\"roleIds\":\""+roleIds+"\",";
			reqmsg += "}}";
		
		    jQuery.ajax({
		          type : "post",
		          async:true,
		          url : "employee.do?handler",
		          dataType : "json",
		          data: {
		               "reqmsg":reqmsg
		          },
		          success : function(data){
		              if(data.des=="success"){
		            	  changeData_t2(data);
		              }else if(data.des=="failure"){
		                 alert("查询失败");
		              }
		          },
		          error:function(){
			           alert("error");
		          }
		     });
		}
		function changeData_t2(data){
			var htmlcode = "";
			if (data.content != null) {
			var allchooseId2="";
			var allchooseName2="";
			jQuery.each(data.content.employeeList, function(i, item) {
				allchooseId2=allchooseId2+item.id+",";
				allchooseName2=allchooseName2+item.name+",";
				allchooseId2.replace(",,",",");
				allchooseName2.replace(",,",",");
			});
			
			if(allchooseId2 != ""){
				allchooseId2 = allchooseId2.substr(0,allchooseId2.length-1)
			}
			if(allchooseName2 != ""){
				allchooseName2 = allchooseName2.substr(0,allchooseName2.length-1)
			}
			$("#allchooseId2").val(allchooseId2);
			$("#allchooseName2").val(allchooseName2);
			
			
				jQuery.each(data.content.employeeList, function(i, item) {
					htmlcode += "<tr class=\"gradeA odd\">";
					//htmlcode += "<td><input id=\""+item.id+"\" value=\""+item.name+"\" name=\"carer\" type=\"radio\" onclick=\"selectOne2("+item.id+",'"+item.name+"')\" class=\"col_selector_t2\"></td>";
				    
				    htmlcode += "<td><input id=\""+item.id+"\" value=\""+item.name+"\" name=\"carer\" type=\"radio\" onclick=\"gethlIdName("+item.id+",'"+item.name+"')\" class=\"col_selector_t2\"></td>";htmlcode += "<td>" + item.name + "</td>";	
				    if (item.siteList != null && item.siteList.length > 0) {//所属站点
				    	if(item.siteList[0] != null){
							var siteName = "";
							jQuery.each(item.siteList, function(j, item2) {
								siteName += item2.name + ",";
							});
							if(siteName != ""){
								siteName = siteName.substring(0, siteName.length-1);
							}
							htmlcode += "<td>"+siteName+"</td>";
						}else{
				    		htmlcode += "<td>无</td>";
				    	}	
					}else{
				    	htmlcode += "<td>无</td>";
				    }	
				    if(item.zhichengs != null && item.zhichengs != ""){
				    	htmlcode += "<td>" + item.zhichengs + "</td>";	
				    }else{
				    	htmlcode += "<td>无</td>";			    
				    }		
					htmlcode += "</tr>";
				});
			}
			$("#datacontainer_t2").html(htmlcode);
			if (data.page != null) {
				genaratePaginateHtml_t2(data.page.pageno, data.page.pageCount);
				genarateRecordNumberHtml_t2(data.page.pageno, data.page.pagesize, data.page.recordCount);
			} else {
				genaratePaginateHtml_t2(1, 1);
				genarateRecordNumberHtml_t2(1, 10, 0);
			}
			checkSelect2();
			
		}
/**
 * 生成分页信息
 * @method genaratePaginateHtml_t2
 * @param {Number} currentpage 当前页
 * @param {Number} totalpage 总页数
 */
function genaratePaginateHtml_t2(currentpage, totalpage, pagesize) {
	currentshownpage_t2 = currentpage;

	var htmlcode = "";
	
// 	上一页
	if (currentpage > 1) {
		htmlcode += "<li class=\"pre\"><a href=\"#\" onclick=\"go2page_t2('" + (currentpage - 1) + "')\"><span class=\"fa fa-angle-left\"></span>&nbsp;上一页</a></li>";
	} else {
		htmlcode += "<li class=\"pre disabled\"><a href=\"#\"><span class=\"fa fa-angle-left\"></span>&nbsp;上一页</a></li>";
	}
	
// 	具体页码
	if (totalpage <= 5) {
		for (var i = 1; i <= totalpage; i++) {
			if (currentpage == i) {
				htmlcode += "<li class=\"active\"><a href=\"#\">" + i + "</a></li>";
			} else {
				htmlcode += "<li><a href=\"#\" onclick=\"go2page_t2('" + i + "')\">" + i + "</a></li>";
			}
		}
	} else {
		var startpage = currentpage;
		var endpage = currentpage;
		while (true) {
			if (endpage - startpage >= 4) {
				break;
			} else {
				if (startpage > 1) {
					startpage = startpage - 1;
				}
				if (endpage < totalpage) {
					endpage = endpage - (-1);
				}
			}
		}
		
		for (var i = startpage; i <= endpage; i++) {
			if (currentpage == i) {
				htmlcode += "<li class=\"active\"><a href=\"#\">" + i + "</a></li>";
			} else {
				htmlcode += "<li><a href=\"#\" onclick=\"go2page_t2('" + i + "')\">" + i + "</a></li>";
			}
		}
	}
	
// 	下一页
	if (totalpage > currentpage) {
		htmlcode += "<li class=\"next\"><a href=\"#\" onclick=\"go2page_t2('" + (parseInt(currentpage) + 1) + "')\">下一页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
	} else {
		htmlcode += "<li class=\"next disabled\"><a href=\"#\">下一页&nbsp;<span class=\"fa fa-angle-right\"></span></a></li>";
	}
	$("#paginationArea_t2").html(htmlcode);
}
/**
 * 生成记录数信息
 * @method genarateRecordNumberHtml_t2
 * @param {Number} currentpage 当前页
 * @param {Number} pagesize 每页记录条目数
 * @param {Number} totalRecord 总记录数
 */
function genarateRecordNumberHtml_t2(currentpage, pagesize, totalRecord) {
	var recordInfos = "";
	if (totalRecord > 0) {
	    recordInfos = "当前显示" + totalRecord + "条总记录";
		recordInfos += "中第" + ((currentpage - 1) * pagesize + 1) + "-";
		if (currentpage * pagesize > totalRecord) {
			recordInfos += totalRecord;
		} else {
			recordInfos += currentpage * pagesize;
		}
		recordInfos += "条 ";
	} else {
		recordInfos = "当前显示0 条总记录中的第0-0条";
	}
	
	$("#datatable_info_t2").html(recordInfos);
}
        function checkSelect2() {//检查所有复选框
            var checklist = document.getElementsByName("index2");
            var haveChoose = document.getElementById("hfids2").value.toString();
            var haveChoose2 = new Array();
            var haveChoose2 = haveChoose.split(",");
            if (haveChoose == "") {
                for (var i = 0; i < checklist.length; i++) {
                    checklist[i].checked = 0;
                }
            } else {
                for (var i = 0; i < checklist.length; i++) {
                    for (var j = 0; j < haveChoose2.length; j++) {
                        if (checklist[i].id == haveChoose2[j]) {
                            checklist[i].checked = 1;
                        }
                    }
                }
            }
        }
  function selectOne2(id, name) {//单框
            if (document.getElementById(id).checked) {
                if (document.getElementById("hfids2").value == "") {
                    document.getElementById("hfids2").value = document.getElementById("hfids2").value + id;
                } else {
                    document.getElementById("hfids2").value = document.getElementById("hfids2").value + "," + id;
                }
                if (document.getElementById("hname2").value == "") {
                    document.getElementById("hname2").value = document.getElementById("hname2").value + name;
                } else {
                    document.getElementById("hname2").value = document.getElementById("hname2").value + "," + name;
                }
            } else {
                var p = document.getElementById("hfids2").value.toString();
                var pp = p.split(",");
                if (pp[0] == id) {
                    var strings = p.replace(id+",", "");
                    document.getElementById("hfids2").value = strings;
                }else{
                    var strings = p.replace("," + id, "");
                    document.getElementById("hfids2").value = strings;
                }

                var p2 = document.getElementById("hname2").value.toString();
                var pp2 = p2.split(",");
                if (pp2[0] == name) {
                    var strings2 = p2.replace(name + ",", "");
                    document.getElementById("hname2").value = strings2;
                } else {
                    var strings2 = p2.replace("," + name, "");
                    document.getElementById("hname2").value = strings2;
                }
            }
            //document.getElementById("firstcheckbox2").checked = false;
   }
function selectAll2() {//全选框
            if (document.getElementById("firstcheckbox2").checked) {
                document.getElementById("hfids2").value = $("#allchooseId2").val();
                
                document.getElementById("hname2").value = $("#allchooseName2").val();
                var checklist = document.getElementsByName("index2");
                for (var i = 0; i < checklist.length; i++) {
                    checklist[i].checked = 1;
                }
            } else {
                document.getElementById("hfids2").value = "";
                document.getElementById("hname2").value = "";
                var checklist = document.getElementsByName("index2");
                for (var i = 0; i < checklist.length; i++) {
                    checklist[i].checked = 0;
                }
            }
}
			
		//获取护理员id,name
		function gethlIdName(id,name){
			$("#hlyId").val(id);
			$("#hlyName").val(name);
		}

		//保存关联护理员
		function savehly(){
			var hlyId = $("#hlyId").val();
			var hlyName = $("#hlyName").val();
			var html="";
			if(hlyId != "" && hlyName != ""){
			var headUrl = "<%=request.getContextPath()%>";
			//var ids = document.getElementById("hfids2").value.split(",");
			//var names = document.getElementById("hname2").value.split(",");
			//for(var i=0;i<ids.length;i++){
				//html+="<a target=\"_blank\" href=\""+headUrl+"/daeEmployee.do?main&employeeId="+ids[i]+"\" style=\"margin-right:10px\" id=\"juse"+i+"\">"+names[i]+"</a><input id=\"juseId"+i+"\" type=\"hidden\" value=\""+ids[i]+"\">";
				html+="<a target=\"_blank\" href=\""+headUrl+"/daeEmployee.do?main&employeeId="+hlyId+"\" id=\"juse1\" style=\"margin-right:10px\">"+hlyName+"</a><input id=\"hlyId1\" type=\"hidden\" value=\""+hlyId+"\">";
			//}
			$("#glhly_input").html(html);
			}else{
				$("#glhly_input").html("");
			}
			$("#hlyId").val("");
			$("#hlyName").val("");
		}
		
		
		
		
	function saveAdd(){
	var touxiangSrc=$("#hide_olderTupian").val();//头像
	if(touxiangSrc == null || touxiangSrc == ""){
		touxiangSrc = "<%=photourlMR %>" + "/photos/av.jpg";
	}
	
	var huiyuanCard_input = $("#huiyuanCard_input").val();//会员卡号
	var name_input = $("#name_input").val();//姓名
	if($.trim(name_input) == ""){
	 	alert("姓名必填");
	 	return;
	}
	var sex_input = $("#sex_input").val();//性别
	var identityId_input = $("#identityId_input").val();//身份证
	if($.trim(identityId_input) == ""){
	 	alert("身份证必填");
	 	return;
	}
	
	var reg = /(^\d{15}$)|(^\d{17}([0-9]|X)$)/; 
	if(!reg.test(identityId_input)){  
        alert("身份证格式错误"); 
        return; 
    }
    var ssn_input = $("#ssn_input").val();//社保号
	var birthDay_input="";//出身年月
	if($("#birthDay_input").val() != ""){
	 	birthDay_input=$("#birthDay_input").val();
	 	birthDay_input=birthDay_input.split("-")[0]+birthDay_input.split("-")[1]+birthDay_input.split("-")[2];
	}

	var familyName_input = $("#familyName_input").val();//民族
	var occupation_input = $("#occupation_input").val();//职业
	var hunyin_input = $("#hunyin_input").val();//婚姻状况
	var homeTel_input = $("#homeTel_input").val();//固话
	var telephone_input = $("#telephone_input").val();//手机
	var bloodType_input = $("#bloodType_input").val();//血型
	//var idNumber_input = $("#idNumber_input").val();//会员号
	//if(idNumber_input == null || idNumber_input == ""){
	//	alert("会员号必填"); 
    //    return; 
	//}
	var customerSource_input = $("#customerSource_input").val();//客户来源
	var source = $("#source").val();//录入来源
	var quyushen_input = $("#quyushen_input").val();//所属区域（省）
	var quyushi_input = $("#quyushi_input").val();//所属区域（市）
	var quyuqu_input = $("#quyuqu_input").val();//所属区域（区）
	var quyujiedao_input = $("#quyujiedao_input").val();//所属区域（街道）
	
	//var ysinput=$("#glys_input input");
	//var guanlianyishiId = new Array();//关联医师ID
	//if(ysinput != null && ysinput.length>0){
	//	for(var i=0;i<ysinput.length;i++){
	//		guanlianyishiId.push($("#glys_input").find("input:eq("+i+")").val());
	//	}
	//}
	
	//var hlyinput=$("#glhly_input input");
	//var hly="";//护理员
	//if(hlyinput != null && hlyinput.length>0){
	//	for(var i=0;i<hlyinput.length;i++){
	//		hly=hly+$("#glhly_input").find("input:eq("+i+")").val()+",";
	//	}
	//	if(hly != ""){
	//		hly=hly.substr(0,hly.length-1);
	//	}
	//}
	var guanlianhuliyuanId=$("#hlyId1").val();//关联护理员ID
	
	
	var hulijibie_input = $("#hulijibie_input").val();//护理级别
	var kehuzhuangtai_input = $("#kehuzhuangtai_input").val();//客户状态
	var hlasttimepg_input="";//最后一次评估日期
	if($("#hlasttimepg_input").val() != ""){
	 	hlasttimepg_input=$("#hlasttimepg_input").val();
	 	hlasttimepg_input=hlasttimepg_input.split("-")[0]+hlasttimepg_input.split("-")[1]+hlasttimepg_input.split("-")[2];
	}
	var pgzhouqi_input = $("#pgzhouqi_input").val();//评估周期
	var fuzhuyidian_input = $("#fuzhuyidian_input").val();//服务注意点
	
	var wenhua_input = $("#wenhua_input").val();//文化程度
	var live_input = $("#live_input").val();//居住
	var liveqita_input = $("#liveqita_input").val();//居住-其他
	var jinji_input = $("#jinji_input").val();//经济
	var jinjiqita_input = $("#jinjiqita_input").val();//经济-其他
	var fangchan_input = $("#fangchan_input").val();//房产
	var fangchanqita_input = $("#fangchanqita_input").val();//房产-其他
	var tsjl_input = $("#tsjl_input").val() + "";//特殊经历
	var tsjlqita_input = $("#tsjlqita_input").val();//特殊经历-其他
	var jtykhgl_input = $("#jtykhgl_input").val();//家庭与看护管理
	var xqsh_input = $("#xqsh_input").val();//兴趣嗜好
	var shjl_input = $("#shjl_input").val();//生活经历
	var shzk_input = $("#shzk_input").val();//生活状况
	
	var reqmsg="{'action':'ADD_OLDER_INFO_REQUEST','content':{";
	
	
	if (touxiangSrc != null && touxiangSrc != "") {
        reqmsg += "\"mainPhoto\":\"" + touxiangSrc + "\",";
	}
	if (huiyuanCard_input != null && huiyuanCard_input != "") {
        reqmsg += "\"memberCard\":\"" + huiyuanCard_input + "\",";
	}
    if (name_input != null && name_input != "") {
        reqmsg += "\"name\":\"" + name_input + "\",";
	}
    if (sex_input != null && sex_input != "") {
        reqmsg += "\"gender\":\"" + sex_input + "\",";
	}
    if (identityId_input != null && identityId_input != "") {
        reqmsg += "\"idnumber\":\"" + identityId_input + "\",";
	}
    if (ssn_input != null && ssn_input != "") {
        reqmsg += "\"socialSecurityNumber\":\"" + ssn_input + "\",";
	}
    if (birthDay_input != null && birthDay_input != "") {
        reqmsg += "\"birthdate\":\"" + birthDay_input + "\",";
	}
    if (familyName_input != null && familyName_input != "") {
        reqmsg += "\"nation\":\"" + familyName_input + "\",";
	}
    if (occupation_input != null && occupation_input != "") {
        reqmsg += "\"occupation\":\"" + occupation_input + "\",";
	}
    if (hunyin_input != null && hunyin_input != "") {
        reqmsg += "\"maritalStatus\":\"" + hunyin_input + "\",";
	}
    if (homeTel_input != null && homeTel_input != "") {
        reqmsg += "\"homeTel\":\"" + homeTel_input + "\",";
	}
	if (telephone_input != null && telephone_input != "") {
        reqmsg += "\"mobileTel\":\"" + telephone_input + "\",";
	}else{
		alert("手机不能为空!");
		return;
	}
	if (bloodType_input != null && bloodType_input != "") {
        reqmsg += "\"bloodType\":\"" + bloodType_input + "\",";
	}
    //if (idNumber_input != null && idNumber_input != "") {
    //    reqmsg += "\"memberNum\":\"" + idNumber_input + "\",";
	//}
    if (customerSource_input != null && customerSource_input != "") {
        reqmsg += "\"memberSource\":\"" + customerSource_input + "\",";
	}
    if (source != null && source != "") {
        reqmsg += "\"source\":" + source + ",";
	}
    if (quyushen_input != null && quyushen_input != "") {
         reqmsg += "\"serviceProvinceId\":" + quyushen_input + ",";
 	}
    if (quyushi_input != null && quyushi_input != "") {
         reqmsg += "\"serviceCityId\":" + quyushi_input + ",";
 	}
 	if (quyuqu_input != null && quyuqu_input != "") {
         reqmsg += "\"serviceAreaId\":" + quyuqu_input + ",";
 	}
 	if (quyujiedao_input != null && quyujiedao_input != "") {
         reqmsg += "\"serviceStreetId\":" + quyujiedao_input + ",";
 	} 
	if (hulijibie_input != null && hulijibie_input != "") {
        reqmsg += "\"nurseLevel\":" + hulijibie_input + ",";
	}
	if (kehuzhuangtai_input != null && kehuzhuangtai_input != "") {
        reqmsg += "\"memberStatus\":" + kehuzhuangtai_input + ",";
	}
	if (hlasttimepg_input != null && hlasttimepg_input != "") {
        reqmsg += "\"lastAssessmentDate\":\"" + hlasttimepg_input + "\",";
	}
	if (pgzhouqi_input != null && pgzhouqi_input != "") {
        reqmsg += "\"assessmentCycle\":" + pgzhouqi_input + ",";
	}
	if (fuzhuyidian_input != null && fuzhuyidian_input != "") {
		fuzhuyidian_input = JSON.stringify(fuzhuyidian_input);
        reqmsg += "\"attentionPoint\":" + fuzhuyidian_input + ",";
	}else{
		reqmsg += "\"attentionPoint\":\"\",";
	}
	//if (guanlianyishiId != null && guanlianyishiId.length > 0) {
	//	reqmsg +="\"older_employee_list\":[";
	//	for(var i=0;i<guanlianyishiId.length;i++){
	//		reqmsg +="{\"employeeId\":"+ guanlianyishiId[i] + "},";
	//	}
    //    reqmsg +="],";
	//}
	if (guanlianhuliyuanId != null && guanlianhuliyuanId != "") {
	    reqmsg +="\"nurseEmployeeId\":"+ guanlianhuliyuanId + ",";
	}
	
	if (wenhua_input != null && wenhua_input != "") {
	    reqmsg +="\"education\":\""+ wenhua_input + "\",";
	}
	if (live_input != null && live_input != "") {
	    reqmsg +="\"live\":\""+ live_input + "\",";
	}
	if (liveqita_input != null && liveqita_input != "") {
	    reqmsg +="\"liveOther\":\""+ liveqita_input + "\",";
	}
	if (jinji_input != null && jinji_input != "") {
	    reqmsg +="\"economic\":\""+ jinji_input + "\",";
	}
	if (jinjiqita_input != null && jinjiqita_input != "") {
	    reqmsg +="\"economicOther\":\""+ jinjiqita_input + "\",";
	}
	if (fangchan_input != null && fangchan_input != "") {
	    reqmsg +="\"house\":\""+ fangchan_input + "\",";
	}
	if (fangchanqita_input != null && fangchanqita_input != "") {
	    reqmsg +="\"houseOther\":\""+ fangchanqita_input + "\",";
	}
	if (tsjl_input != null && tsjl_input != "" && tsjl_input != "null") {
	    reqmsg +="\"specialExperience\":\""+ tsjl_input + "\",";
	}
	if (tsjlqita_input != null && tsjlqita_input != "") {
	    reqmsg +="\"specialExperienceOther\":\""+ tsjlqita_input + "\",";
	}
	if (jtykhgl_input != null && jtykhgl_input != "") {
		jtykhgl_input = JSON.stringify(jtykhgl_input);
	    reqmsg +="\"familyComposition\":"+ jtykhgl_input + ",";
	}else{
		reqmsg +="\"familyComposition\":\"\",";
	}
	if (xqsh_input != null && xqsh_input != "") {
		xqsh_input = JSON.stringify(xqsh_input);
	    reqmsg +="\"interest\":"+ xqsh_input + ",";
	}else{
		reqmsg +="\"interest\":\"\",";
	}
	if (shjl_input != null && shjl_input != "") {
		shjl_input = JSON.stringify(shjl_input);
	    reqmsg +="\"lifeExperience\":"+ shjl_input + ",";
	}else{
		reqmsg +="\"lifeExperience\":\"\",";
	}
	if (shzk_input != null && shzk_input != "") {
		shzk_input = JSON.stringify(shzk_input);
	    reqmsg +="\"livingCondition\":"+ shzk_input + ",";
	}else{
		reqmsg +="\"livingCondition\":\"\",";
	}
	
	var add1 = $("#addressMessge tr");
	if(add1.length > 1){//有地址信息
		reqmsg += "\"olderAddressList\":[";
		for (var i = 0;i < add1.length - 1;i++){
			reqmsg += "{\"addressType\":" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(0)").find("input").val() + ",";
			reqmsg += "\"provinceId\":" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(0)").val() + ",";
			reqmsg += "\"cityId\":" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(1)").val() + ",";
			reqmsg += "\"areaId\":" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(2)").val() + ",";
			reqmsg += "\"street\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(3)").val() + "\",";
			reqmsg += "\"committeeVillage\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(4)").val() + "\",";
			reqmsg += "\"road\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(5)").val() + "\",";
			reqmsg += "\"lane\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(6)").val() + "\",";
			reqmsg += "\"number\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(7)").val() + "\",";
			reqmsg += "\"room\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(8)").val() + "\",";
			reqmsg += "\"address\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(9)").val() + "\",";
			reqmsg += "\"zipCode\":\"" + $("#addressMessge").find("tr:eq(" + i + ")").find("td:eq(1)").find("input:eq(10)").val() + "\"},";
		}
		reqmsg = reqmsg.substr(0,reqmsg.length-1);
		reqmsg += "],";
	}else{
		reqmsg += "\"olderAddressList\":[],";
	}
	
	var add11 = $("#emergencyContact tr");
	if (add11.length > 1){//有紧急联系人信息
		reqmsg += "\"olderContactList\":[";
		for (var i = 0;i < add11.length - 1;i++){
			reqmsg += "{\"contactName\":\"" + $("#emergencyContact").find("tr:eq(" + i + ")").find("td:eq(0)").html() + "\",";
			reqmsg += "\"relation\":\"" + $("#emergencyContact").find("tr:eq(" + i + ")").find("td:eq(1)").html() + "\",";
			reqmsg += "\"tel\":\"" + $("#emergencyContact").find("tr:eq(" + i + ")").find("td:eq(2)").html() + "\"},";
		}
		reqmsg = reqmsg.substr(0,reqmsg.length-1);
		reqmsg += "],";
	}else{
		reqmsg += "\"olderContactList\":[],";
	}
	
	reqmsg +="\"accountNum\":0,";
	
	reqmsg=reqmsg.substr(0,reqmsg.length-1);
	reqmsg += "}}";

	jQuery.ajax({
          type : "post",
          async:true,
          url : "addOlders.do?handler",
          dataType : "json",
          data: {
               "reqmsg":reqmsg
          },
          success : function(data){
              if(data.des=="success"){
              	alert("保存成功");
              	var id=data.content.id;
              	var path="<%=request.getContextPath()%>";
              	var url=path+"/daeOlder.do?main&id="+id;
              	window.location.replace(url);
              }else if(data.des=="failure"){
                 alert("保存失败");
              }else{
              	alert(data.des);
              }
          },
          error:function(){
	           alert("error");
          }
     });
     }
     
//获取当前时间return YYYYMMDDhhmmss
function getNowFormatDate() {
    var date = new Date();
    var month = date.getMonth() + 1;
    var strDate = date.getDate();
    var strHour = date.getHours();
    var strMinutes = date.getMinutes();
    var strSeconds = date.getSeconds();
    
    if (month >= 1 && month <= 9) {
        month = "0" + month;
    }
    if (strDate >= 0 && strDate <= 9) {
        strDate = "0" + strDate;
    }
    if (strHour >= 0 && strHour <= 9) {
        strHour = "0" + strHour;
    }
    if (strMinutes >= 0 && strMinutes <= 9) {
        strMinutes = "0" + strMinutes;
    }
    if (strSeconds >= 0 && strSeconds <= 9) {
        strSeconds = "0" + strSeconds;
    }
    var currentdate = date.getFullYear() + "" + month + "" + strDate + "" + strHour + "" + strMinutes + "" + strSeconds;
    return currentdate;
}

     function pipeiDZLX(addtype){
     	var id=0;
     	switch (addtype)
		{
			case "居住地":
  			id=0;
  			break;
  			
			case "户口所在地":
  			id=1;
  			break;

			case "收信地址":
  			id=2;
  			break;
  			
  			default:
  			break;
		}
		return id;
     }
     
      //上传图片
	function uploadPic() {
		var currPic = $("#pic4upload1").val();
		if (currPic != null && currPic != "") {
			var ajax_option = {
				async:false,
				data:{},
				success:function(data) {
					if (data != null && data != "") {
						$("#srcPath").val(data); 
						//$("#touxiangId2").attr("src", data);  //将当前图片设为上传的图片
						openImagejsp(data);
					} else {
						alert("图片上传失败");
					}
				}
			};
			$("#picuploadform1").ajaxSubmit(ajax_option);
		} else {
			//alert("请选择图片");
		}
	}
	function openImagejsp(data){
		window.open ("view/imageCut/jquery-image-cut/image.jsp?"+data, "newwindow", "height=550, width=1100, top=200, left=450, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no");
	}
	 //上传裁剪后图片
	function uploadPic_cut() {
			var ajax_option = {
				async:false,
				data:{},
				success:function(data) {
					if (data != null && data != "") {
						var result = JSON.parse(data);
						$("#hide_olderTupian").val(result.base64);
						$("#touxiangId").attr("src", result.url);  //将当前图片设为上传的图片
						
					} else {
						alert("图片上传失败");
					}
				}
			};
			$("#image_submit").ajaxSubmit(ajax_option);
	}
	</script>

	<!-- Bootstrap core JavaScript
================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="js/behaviour/voice-commands.js"></script>
	<script src="js/bootstrap/dist/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/jquery.flot/jquery.flot.js"></script>
	<script type="text/javascript" src="js/jquery.flot/jquery.flot.pie.js"></script>
	<script type="text/javascript"
		src="js/jquery.flot/jquery.flot.resize.js"></script>
	<script type="text/javascript"
		src="js/jquery.flot/jquery.flot.labels.js"></script>
	<script type="text/javascript" src="js/jquery.form.js"></script>
</body>
</html>
