/*    */ package fsk.socket;
/*    */ 
/*    */ import java.net.ServerSocket;
/*    */ import java.net.Socket;
/*    */ import java.text.SimpleDateFormat;
/*    */ import java.util.Date;
import fsk.init.SystemInit;

import org.apache.log4j.Logger;
/*    */ 
/*    */ public class JTWGTCPSListener extends Thread
/*    */ {
/* 17 */   private static Logger logger = Logger.getLogger(JTWGTCPSListener.class);
/*    */   public static final int SERVERPORT = 8346;
/* 22 */   private SimpleDateFormat formater1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
/*    */ 
/*    */ 
/*    */   public void run() {
/*    */     try {
/* 31 */       logger.debug("家庭网关报警数据信息监听：开始监听...");
/* 32 */       ServerSocket serverSocket = new ServerSocket(8346);
/*    */       while (true) {
/* 34 */         Socket client = serverSocket.accept();
/* 35 */         Date datestart = new Date();
/* 36 */         logger.debug(this.formater1.format(datestart) + "家庭网关报警数据信息监听：端口监听到数据:");
/*    */         try
/*    */         {
///* 39 */           JTWGDoHandlerThread jtwgDoHandlerThread = new JTWGDoHandlerThread(client.getInputStream(), client.getOutputStream(), this.systemService);
///* 40 */           jtwgDoHandlerThread.start();
	                 SystemInit.cachedThreadPool.execute(new JTWGDoHandlerThread(client.getInputStream(), client.getOutputStream()));
/*    */         } catch (Exception e) {
/* 42 */           logger.error(e.toString());
/* 43 */           e.printStackTrace();
/* 44 */         if (client != null) {
/* 45 */           client.close();
/* 46 */           client = null;
/*    */         }
                }
/*    */       }
/*    */ 
/*    */     }
/*    */     catch (Exception e)
/*    */     {
/* 53 */       logger.error(e.toString());
/* 54 */       e.printStackTrace();
/*    */     }
/*    */   }
/*    */ }

/* Location:           E:\jhpt\WEB-INF\classes\
 * Qualified Name:     jhpt.socket.JTWGTCPSListener
 * JD-Core Version:    0.6.1
 */